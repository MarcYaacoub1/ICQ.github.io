<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>دراسة الكتاب مع ال ABS</title>
    <link rel="shortcut icon" href="upscalemedia-transformed.jpg" type="image/x-icon">
    <!-- Font Awesome for search icon and chat icon -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
    <style>
        /* General Styling */
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            margin: 0;
            padding: 0;
            background-color: #f4f7f6;
            color: #333;
            line-height: 1.6;
            direction: rtl; /* Right-to-left for Arabic */
            text-align: right; /* Align text to the right for Arabic */
            scroll-behavior: smooth; /* Smooth scrolling for the entire page */
            /* Add scroll-padding-top to account for the sticky header height */
            scroll-padding-top: 100px; /* Adjust this value if header height changes */
        }

        header {
            background-color: #2c3e50;
            color: #fff;
            padding: 20px; /* Uniform padding */
            text-align: center; /* Still for the h1 within header-content */
            box-shadow: 0 2px 5px rgba(0, 0, 0, 0.2);
            position: sticky;
            top: 0;
            z-index: 1000;
            display: flex; /* Make header a flex container */
            justify-content: space-between;
            align-items: center;
        }

        .header-content {
            flex-grow: 1; /* Allows title to take central space */
            text-align: center;
            order: 2; /* Visual order for RTL: 1=left, 2=center, 3=right */
            margin: 0 20px; /* Add horizontal margin around title */
        }

        header h1 {
            margin: 0;
            font-size: 2.5em;
            padding-bottom: 10px;
        }

        header p {
            font-size: 1.1em;
            max-width: 800px;
            margin: 0 auto;
        }

        .header-logo {
            width: 60px;
            height: auto;
            filter: drop-shadow(0 0 5px rgba(0,0,0,0.3));
            order: 3; /* Visual order for RTL: 1=left, 2=center, 3=right */
        }

        /* Search Area Wrapper Styling - now directly in header flow */
        .search-area-wrapper {
            display: flex; /* Always flex to contain icon/bar */
            align-items: center;
            gap: 10px; /* Space between icon and bar */
            order: 1; /* Visual order for RTL: 1=left, 2=center, 3=right */
            /* No absolute positioning here */
        }

        .search-icon-container {
            display: block; /* Always block within wrapper */
        }

        #searchIcon {
            background: none;
            border: none;
            color: #fff; /* White icon on dark header */
            font-size: 1.5em; /* Adjust size for header */
            cursor: pointer;
            padding: 5px;
            transition: color 0.3s ease;
        }

        #searchIcon:hover {
            color: #f0f0f0;
        }

        .search-bar {
            display: none; /* Hidden by default */
            background-color: #f9f9f9;
            padding: 5px 10px; /* Smaller padding for header bar */
            border-radius: 5px;
            box-shadow: 0 1px 3px rgba(0, 0, 0, 0.1);
            gap: 5px; /* Smaller gap inside bar */
            align-items: center;
            width: 200px; /* Default width for search bar */
            box-sizing: border-box;
            animation: fadeIn 0.3s ease-out;
        }

        .search-bar.active {
            display: flex;
        }

        #searchInput {
            flex-grow: 1; /* Allow input to take available space */
            padding: 8px 12px;
            border: 1px solid #ddd;
            border-radius: 5px;
            font-size: 1em;
            outline: none;
        }

        #searchCloseButton {
            background: none;
            border: none;
            color: #e74c3c; /* Red color for close button */
            font-size: 1.2em;
            cursor: pointer;
            padding: 5px;
            transition: color 0.3s ease;
        }

        #searchCloseButton:hover {
            color: #c0392b;
        }

        /* Highlight style for search results */
        .highlight {
            background-color: #ffeb3b; /* Bright yellow for highlighting */
            padding: 2px 0;
            border-radius: 3px;
        }

        /* No results message */
        #noResultsMessage {
            display: none; /* Hidden by default */
            text-align: center;
            color: #e74c3c;
            font-size: 1.2em;
            margin-top: 20px;
            padding: 15px;
            border: 1px solid #e74c3c;
            background-color: #fce4e4;
            border-radius: 8px;
        }

        main {
            max-width: 1000px;
            margin: 20px auto;
            padding: 20px;
            background-color: #fff;
            border-radius: 8px;
            box-shadow: 0 0 10px rgba(0, 0, 0, 0.1);
        }

        /* Welcome Screen Styling */
        .welcome-screen {
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            min-height: 70vh; /* Make it take most of the viewport height */
            text-align: center;
            padding: 20px;
            animation: fadeIn 1s ease-out;
            background-image: none;
            opacity: 1;
        }

        .welcome-screen h1 { /* Changed from h2 to h1 for consistency */
            color: #2c3e50;
            font-size: 3em;
            margin-bottom: 20px;
        }

        .welcome-buttons {
            display: flex;
            flex-wrap: wrap; /* Allow buttons to wrap */
            gap: 20px;
            margin-top: 30px; /* Space between welcome message and buttons */
            justify-content: center;
        }

        /* Unified Button Styling for Welcome Screen and Main Navigation */
        .welcome-buttons .chapter-nav-button,
        .chapter-navigation .chapter-nav-button {
            background-color: #3498db; /* Default blue, same as nav-button */
            color: #fff;
            border: none;
            padding: 15px 25px; /* Slightly larger padding for main chapter buttons */
            border-radius: 5px;
            cursor: pointer;
            font-size: 1.2em;
            transition: background-color 0.3s ease, transform 0.2s ease, box-shadow 0.3s ease;
            box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1); /* Consistent shadow */
        }

        .welcome-buttons .chapter-nav-button { /* Specific styling for welcome buttons */
            padding: 18px 30px; /* Make them larger than regular chapter buttons */
            font-size: 1.5em;
            border-radius: 8px; /* Slightly more rounded */
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.15); /* More pronounced shadow */
        }


        .chapter-nav-button:hover {
            background-color: #2980b9; /* Darker blue on hover */
            transform: translateY(-3px); /* More pronounced lift on hover */
            box-shadow: 0 6px 12px rgba(0, 0, 0, 0.2); /* Stronger shadow on hover */
        }

        /* Active state for chapter navigation buttons */
        .chapter-nav-button.active {
            background-color: #e74c3c; /* Red for active state, same as section nav */
            box-shadow: 0 2px 5px rgba(0, 0, 0, 0.2);
            transform: translateY(0); /* No lift when active */
        }

        /* Chapter Navigation Buttons (used after welcome screen) */
        .chapter-navigation {
            display: none; /* Hidden by default, shown after welcome */
            justify-content: center;
            flex-wrap: wrap; /* Allow buttons to wrap */
            gap: 15px;
            margin-bottom: 30px;
            padding-bottom: 20px;
            border-bottom: 1px solid #eee;
        }


        /* Chapter Content Containers */
        /* These will now primarily hold navigation, not the sections themselves */
        .chapter-content {
            display: none; /* Hide all chapter content by default */
        }

        .chapter-content.active {
            display: block; /* Show active chapter content (mainly its navigation) */
        }

        /* Navigation Buttons (for sections within a chapter) */
        .navigation {
            display: flex;
            flex-wrap: wrap; /* Allow buttons to wrap to next line */
            justify-content: center;
            gap: 10px;
            margin-bottom: 30px;
            padding-bottom: 20px;
            border-bottom: 1px solid #eee;
        }

        .nav-button {
            background-color: #3498db;
            color: #fff;
            border: none;
            padding: 12px 20px;
            border-radius: 5px;
            cursor: pointer;
            font-size: 1.05em;
            transition: background-color 0.3s ease, transform 0.2s ease, box-shadow 0.3s ease, padding 0.3s ease, font-size 0.3s ease, border-radius 0.3s ease; /* Added padding, font-size, border-radius for smooth transition */
            flex-shrink: 0; /* Prevent buttons from shrinking */
            box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1); /* Consistent shadow */
        }

        .nav-button:hover {
            background-color: #2980b9;
            transform: translateY(-2px);
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.15); /* Stronger shadow on hover */
        }

        .nav-button.active {
            background-color: #e74c3c;
            box-shadow: 0 2px 5px rgba(0, 0, 0, 0.2);
        }

        /* New class for larger navigation buttons */
        .nav-button-large {
            padding: 18px 30px; /* Larger padding */
            font-size: 1.5em; /* Larger font size */
            border-radius: 8px; /* Slightly more rounded */
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.15); /* More pronounced shadow */
        }

        /* Feature Sections - now act as individual pages */
        .feature-section {
            display: none; /* Hidden by default */
            padding: 20px;
            border-radius: 8px;
            background-color: #fcfcfc;
            border: 1px solid #eee;
            margin-bottom: 20px;
            animation: fadeIn 0.8s ease-out; /* Fade-in effect */
        }

        .feature-section.active-page { /* New class to denote the currently active "page" */
            display: block; /* Show active section */
        }

        .feature-section h2 {
            color: #2c3e50;
            font-size: 2em;
            border-bottom: 2px solid #e74c3c;
            padding-bottom: 10px;
            margin-bottom: 20px;
            text-align: right;
        }

        .content-wrapper {
            display: flex;
            flex-direction: row-reverse; /* Image on left, text on right for RTL */
            gap: 30px;
            align-items: flex-start; /* Align items to the top */
        }

        .text-content {
            flex: 2;
        }

        .text-content h3 {
            color: #3498db;
            font-size: 1.5em;
            margin-bottom: 10px;
        }

        .text-content p {
            font-size: 1.1em;
            line-height: 1.8;
            margin-bottom: 15px;
        }

        .image-content {
            flex: 1;
            text-align: center;
            background-color: #f9f9f9;
            border: 1px solid #ddd;
            border-radius: 8px;
            padding: 15px;
            box-shadow: 0 2px 4px rgba(0, 0, 0, 0.05);
        }

        .image-content img {
            max-width: 100%;
            height: auto;
            border-radius: 5px;
            margin-bottom: 10px;
        }

        .image-caption {
            font-size: 0.9em;
            color: #555;
            font-style: italic;
        }

        /* Footer Styling */
        footer {
            background-color: #2c3e50;
            color: #fff;
            text-align: center;
            padding: 20px 0;
            margin-top: 30px;
            font-size: 0.9em;
        }

        /* Animation for fading in sections */
        @keyframes fadeIn {
            from {
                opacity: 0;
                transform: translateY(20px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        /* Responsive Design */
        @media (max-width: 768px) {
            header {
                flex-direction: column; /* Stack items */
                padding: 15px 10px; /* Adjust padding */
                align-items: center; /* Center items when stacked */
            }

            .header-logo {
                width: 50px; /* Adjust size for smaller screens */
                margin-top: 10px; /* Space above logo */
            }
            
            .header-content {
                order: 1; /* Title first */
                margin: 0 0 15px 0; /* Space below title */
            }

            .search-area-wrapper {
                order: 2; /* Search below title */
                width: 100%; /* Take full width */
                justify-content: center; /* Center search elements */
                margin-bottom: 10px; /* Space below search */
            }

            .search-icon-container {
                margin-bottom: 10px; /* Adjust spacing */
            }

            .search-bar {
                width: 90%; /* Adjust width for mobile */
                max-width: none; /* Remove max-width constraint */
            }

            header h1 {
                font-size: 1.8em;
            }

            header p {
                font-size: 1.1em;
                padding: 0 15px;
            }

            .nav-button, .chapter-nav-button { /* Apply to both types of buttons */
                padding: 10px 15px;
                font-size: 0.95em;
            }

            .content-wrapper {
                flex-direction: column; /* Stack image and text vertically on smaller screens */
            }

            .image-content {
                margin-bottom: 20px;
                order: -1; /* Image appears before text in column layout */
            }

            .welcome-screen h1 { /* Changed from h2 to h1 for consistency */
                font-size: 2em;
            }

            .welcome-buttons {
                flex-direction: column;
            }

            .welcome-buttons .chapter-nav-button {
                width: 90%; /* Make welcome buttons almost full width */
                font-size: 1.2em;
                padding: 15px 20px;
            }
        }

        @media (max-width: 480px) {
            .nav-button, .chapter-nav-button { /* Apply to both types of buttons */
                width: 100%; /* Full width buttons on very small screens */
            }
            .header-logo {
                width: 40px; /* Further reduce size for very small screens */
            }

            /* Adjust font sizes for smaller screens for readability */
            main {
                padding: 10px;
            }

            .feature-section h2 {
                font-size: 1.6em;
            }

            .text-content h3 {
                font-size: 1.2em;
            }

            .text-content p {
                font-size: 1em;
            }
        }

        /* Chatbot FAB and Modal Styles */
        .chat-fab {
            position: fixed;
            bottom: 20px;
            left: 20px; /* Position on the left for RTL */
            background-color: #3498db;
            color: #fff;
            width: 60px;
            height: 60px;
            border-radius: 50%;
            display: flex;
            justify-content: center;
            align-items: center;
            font-size: 1.8em;
            cursor: pointer;
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.2);
            transition: all 0.3s ease; /* Changed to all for smooth animation */
            z-index: 1001; /* Above header */
            animation: pulse 2s infinite; /* Added pulse animation */
        }

        /* Pulse animation for chat FAB */
        @keyframes pulse {
            0% {
                box-shadow: 0 0 0 0 rgba(52, 152, 219, 0.7);
            }
            70% {
                box-shadow: 0 0 0 15px rgba(52, 152, 219, 0);
            }
            100% {
                box-shadow: 0 0 0 0 rgba(52, 152, 219, 0);
            }
        }

        .chat-fab:hover {
            background-color: #2980b9;
            transform: scale(1.1); /* More pronounced scale on hover */
            animation: none; /* Stop pulse on hover */
        }

        .chat-fab.active {
            background-color: #e74c3c; /* Red when there are unread messages */
        }

        /* Notification badge on chat FAB */
        .chat-fab .notification-badge {
            position: absolute;
            top: -5px;
            right: -5px;
            background-color: #e74c3c;
            color: white;
            border-radius: 50%;
            width: 20px;
            height: 20px;
            display: flex;
            justify-content: center;
            align-items: center;
            font-size: 0.7em;
            font-weight: bold;
        }

        .chat-modal {
            display: none; /* Hidden by default */
            position: fixed;
            bottom: 90px; /* Above the FAB */
            left: 20px; /* Aligned with FAB */
            width: 350px;
            height: 500px;
            background-color: #fff;
            border-radius: 10px;
            box-shadow: 0 8px 16px rgba(0, 0, 0, 0.3);
            flex-direction: column;
            overflow: hidden;
            z-index: 1002; /* Above FAB */
            animation: modalAppear 0.3s ease-out; /* Changed to modalAppear */
            border: 1px solid #ddd;
            transform-origin: left bottom; /* For modalAppear animation */
        }

        /* Modal appear animation */
        @keyframes modalAppear {
            0% {
                transform: scale(0.5);
                opacity: 0;
            }
            100% {
                transform: scale(1);
                opacity: 1;
            }
        }

        .chat-modal.active {
            display: flex;
        }

        .chat-header {
            background-color: #2c3e50;
            color: #fff;
            padding: 15px;
            display: flex;
            justify-content: space-between;
            align-items: center;
            font-size: 1.2em;
            font-weight: bold;
            border-top-left-radius: 10px;
            border-top-right-radius: 10px;
        }

        .chat-header .close-button {
            background: none;
            border: none;
            color: #fff;
            font-size: 1.5em;
            cursor: pointer;
            transition: color 0.3s ease;
        }

        .chat-header .close-button:hover {
            color: #f0f0f0;
        }

        .chat-header .clear-chat-button {
            background: none;
            border: 1px solid #fff;
            color: #fff;
            padding: 5px 10px;
            border-radius: 5px;
            font-size: 0.8em;
            cursor: pointer;
            transition: background-color 0.3s ease, color 0.3s ease;
            margin-right: 10px; /* Space between clear and close */
        }

        .chat-header .clear-chat-button:hover {
            background-color: #fff;
            color: #2c3e50;
        }

        .chat-messages {
            flex-grow: 1;
            padding: 15px;
            overflow-y: auto;
            display: flex;
            flex-direction: column;
            gap: 10px;
            background-color: #f9f9f9;
        }

        .chat-messages::-webkit-scrollbar {
            width: 8px;
        }

        .chat-messages::-webkit-scrollbar-track {
            background: #f1f1f1;
            border-radius: 10px;
        }

        .chat-messages::-webkit-scrollbar-thumb {
            background: #888;
            border-radius: 10px;
        }

        .chat-messages::-webkit-scrollbar-thumb:hover {
            background: #555;
        }

        .message-bubble {
            max-width: 85%; /* Adjusted for better appearance */
            padding: 12px 16px; /* Adjusted padding */
            border-radius: 18px;
            word-wrap: break-word;
            line-height: 1.5; /* Adjusted line height */
            box-shadow: 0 1px 2px rgba(0, 0, 0, 0.1);
            position: relative; /* For messageAppear animation */
            opacity: 0; /* Initially hidden for animation */
            animation: messageAppear 0.3s ease-out forwards; /* Animation for new messages */
            animation-delay: 0.1s; /* Slight delay for staggered appearance */
        }

        /* Message appear animation */
        @keyframes messageAppear {
            from {
                opacity: 0;
                transform: translateY(10px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        .user-message {
            background-color: #e0f7fa; /* Light blue */
            align-self: flex-end; /* Align to the right for RTL */
            border-bottom-left-radius: 5px;
            border-top-right-radius: 18px;
            border-bottom-right-radius: 18px;
            margin-left: 15%; /* Keep some margin for max-width */
        }

        .bot-message {
            background-color: #e8f5e9; /* Light green */
            align-self: flex-start; /* Align to the left for RTL */
            border-bottom-right-radius: 5px;
            border-top-left-radius: 18px;
            border-bottom-left-radius: 18px;
            margin-right: 15%; /* Keep some margin for max-width */
        }

        /* Message timestamp */
        .message-time {
            font-size: 0.7em;
            color: #7f8c8d;
            margin-top: 5px;
            text-align: left; /* Default for bot messages */
        }

        .user-message .message-time {
            text-align: right; /* For user messages */
        }

        .chat-input-container {
            display: flex;
            padding: 15px;
            border-top: 1px solid #eee;
            background-color: #fff;
            gap: 10px;
            align-items: center; /* Align items vertically */
        }

        .chat-input-container textarea {
            flex-grow: 1;
            padding: 10px;
            border: 1px solid #ddd;
            border-radius: 20px;
            font-size: 1em;
            resize: none; /* Disable manual resizing */
            min-height: 40px;
            max-height: 100px; /* Limit height to prevent excessive expansion */
            overflow-y: auto;
            direction: rtl; /* Ensure input is RTL */
            text-align: right; /* Ensure input text is right-aligned */
            transition: border-color 0.3s; /* Smooth transition for focus */
        }

        .chat-input-container textarea:focus {
            border-color: #3498db; /* Blue border on focus */
            outline: none; /* Remove default outline */
        }

        .chat-input-container button {
            background-color: #3498db;
            color: #fff;
            border: none;
            border-radius: 50%;
            width: 40px;
            height: 40px;
            display: flex;
            justify-content: center;
            align-items: center;
            font-size: 1.2em;
            cursor: pointer;
            transition: all 0.3s ease; /* Changed to all for smooth animation */
        }

        .chat-input-container button:hover {
            background-color: #2980b9;
            transform: scale(1.05); /* Slightly larger on hover */
        }

        .chat-input-container button:disabled {
            background-color: #95a5a6; /* Grey out when disabled */
            cursor: not-allowed;
        }

        /* Loading indicator (reverted to text) */
        .loading-indicator {
            display: none; /* Hidden by default */
            text-align: center;
            margin: 10px 0; /* Adjusted margin */
            font-style: italic;
            color: #7f8c8d;
        }

        /* Typing indicator (new) */
        .typing-indicator {
            display: flex;
            align-items: center;
            justify-content: flex-start; /* Align to the left for bot typing */
            margin-bottom: 10px;
            opacity: 0; /* Initially hidden */
            transition: opacity 0.3s;
        }

        .typing-indicator.active {
            opacity: 1;
        }

        .typing-indicator span {
            height: 8px;
            width: 8px;
            background-color: #7f8c8d;
            border-radius: 50%;
            display: inline-block;
            margin: 0 2px;
            animation: typingAnimation 1.5s infinite ease-in-out;
        }

        .typing-indicator span:nth-child(1) {
            animation-delay: 0s;
        }

        .typing-indicator span:nth-child(2) {
            animation-delay: 0.2s;
        }

        .typing-indicator span:nth-child(3) {
            animation-delay: 0.4s;
        }

        @keyframes typingAnimation {
            0%, 60%, 100% {
                transform: translateY(0);
            }
            30% {
                transform: translateY(-5px);
            }
        }

        /* Suggested Questions (new) */
        .suggested-questions {
            display: flex;
            flex-direction: column;
            gap: 8px;
            padding: 10px;
            background-color: #f5f5f5;
            border-top: 1px solid #eee;
        }

        .suggested-question {
            background-color: #e8f5e9;
            border: 1px solid #ddd;
            border-radius: 20px;
            padding: 8px 12px;
            cursor: pointer;
            font-size: 0.9em;
            text-align: right;
            transition: all 0.2s;
        }

        .suggested-question:hover {
            background-color: #d4edda;
            transform: translateX(-5px);
        }

        /* Toast Notification Styles (existing, but ensure z-index is correct) */
        .toast-notification {
            position: fixed;
            bottom: 90px; /* Above FAB */
            left: 20px; /* Aligned with FAB */
            background-color: #4CAF50; /* Green background */
            color: white;
            padding: 12px 20px;
            border-radius: 8px;
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.2);
            opacity: 0; /* Initially hidden */
            transform: translateY(20px); /* Start slightly below */
            transition: opacity 0.5s ease-out, transform 0.5s ease-out;
            z-index: 1003; /* Above chat modal if it's not active */
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .toast-notification.show {
            opacity: 1;
            transform: translateY(0);
        }

        /* Responsive adjustments for chat modal and toast */
        @media (max-width: 600px) {
            .chat-modal {
                width: 90%;
                height: 70%; /* Adjusted height for better mobile fit */
                bottom: 10px;
                left: 5%;
                right: 5%;
                margin: auto;
            }
            .chat-fab {
                bottom: 10px;
                left: 10px;
                width: 50px;
                height: 50px;
                font-size: 1.5em;
            }
            .toast-notification {
                width: calc(100% - 40px); /* Full width minus padding */
                left: 20px;
                right: 20px;
                bottom: 70px; /* Adjust if FAB size changes */
                box-sizing: border-box;
            }
        }
    </style>
</head>
<body>
    <header>
        <!-- Search elements moved to header -->
        <div class="search-area-wrapper" id="searchAreaWrapper">
            <div class="search-icon-container">
                <button id="searchIcon" aria-label="بحث">
                    <i class="fas fa-search"></i>
                </button>
            </div>
            <div class="search-bar" id="searchBar">
                <input type="text" id="searchInput" placeholder="ابحث في المحتوى...">
                <button id="searchCloseButton" aria-label="إغلاق البحث">
                    <i class="fas fa-times"></i>
                </button>
            </div>
        </div>
        <div class="header-content">
            <h1>دراسة الكتاب مع ال ABS</h1>
        </div>
    </header>

    <main>
        <div class="welcome-screen" id="welcomeScreen">
            <h1>أهلاً بك في دراسة الكتاب مع أسرة أبونا فلتاؤس</h1>
            <p>اختار الجزء الذي تريد رؤيته:</p>
            <div class="welcome-buttons">
                <button class="chapter-nav-button" data-chapter="revelation1-content">صفات الذات الإلهية في سفر الرؤيا 1</button>
                <button class="chapter-nav-button" data-chapter="revelation2-content">الكنائس السبع في سفر الرؤيا 2 و 3</button>
                <button class="chapter-nav-button" data-chapter="acts-content">حياة الآباء الرسل وأهم الأحداث من سفر أعمال الرسل</button>
                <button class="chapter-nav-button" data-chapter="my-church-content">معلومات عن كنيستي</button> <!-- New button for church info -->
            </div>
        </div>

        <div id="chapterNavigationContainer" class="chapter-navigation">
            <button class="chapter-nav-button" data-chapter="revelation1-content">صفات الذات الإلهية في سفر الرؤيا 1</button>
            <button class="chapter-nav-button" data-chapter="revelation2-content">الكنائس السبع في سفر الرؤيا 2 و 3</button>
            <button class="chapter-nav-button" data-chapter="acts-content">حياة الآباء الرسل وأهم الأحداث من سفر أعمال الرسل</button>
            <button class="chapter-nav-button" data-chapter="my-church-content">معلومات عن كنيستي</button> <!-- New button for church info -->
        </div>

        <div id="noResultsMessage">
            <p>لا توجد نتائج مطابقة لبحثك.</p>
        </div>

        <!-- Chapter: Revelation 1 - Divine Attributes -->
        <div id="revelation1-content" class="chapter-content">
            <div class="navigation">
                <button class="nav-button active" data-target="sonOfMan">متمنطقًا بمنطقة ذهب</button>
                <button class="nav-button" data-target="whiteHair">رأسه وشعره أبيضان</button>
                <button class="nav-button" data-target="flameEyes">عيناه كلهيب نار</button>
                <button class="nav-button" data-target="bronzeFeet">رجلاه مثل النحاس النقي</button>
                <button class="nav-button" data-target="voiceWater">صوته كمياه كثيرة</button>
                <button class="nav-button" data-target="twoEdgedSword">من فمه يخرج سيف ذو حدين</button>
                <button class="nav-button" data-target="shiningFace">وجهه كالشمس وهي تضيء</button>
                <button class="nav-button" data-target="appearedChrist">ظهور السيد المسيح ليوحنا</button>
            </div>
        </div>
        <section id="sonOfMan" class="feature-section">
            <h2>متمنطقًا بمنطقة من ذهب</h2>
            <div class="content-wrapper">
                <div class="text-content">
                    <h3>النص الكتابي:</h3>
                    <p>"...مُتَمَنْطِقًا عِنْدَ ثَدْيَيْهِ بِمِنْطَقَةٍ مِنْ ذَهَبٍ." (الرؤيا 1: 13)</p>
                    <h3>المعنى:</h3>
                    <p>هذا التشبيه يدل على **مجد لاهوته** و**الاستعداد للخدمة والسلطة**. المنطقة الذهبية تشير إلى **الكرامة، النبل، والغنى المطلق** الذي يميز الذات الإلهية. عادة ما كانت الأحزمة (المناطق) تستخدم لتجميع الثياب استعداداً للعمل أو للسلطة.</p>
                    <h3>التشبيه:</h3>
                    <p>يرمز إلى **الملك المتربع على عرشه**، والذي يتمتع بسلطان كامل ومجد لا يوصف، وهو جاهز للقيام بعمله الإلهي في الدينونة والرعاية.</p>
                </div>
                <div class="image-content">
                    <img src="www-St-Takla-org--236--The-Revelation-to-John.jpg" alt="">
                    <p class="image-caption">تعبير عن المجد والسلطان الإلهي.</p>
                </div>
            </div>
        </section>

        <section id="whiteHair" class="feature-section">
            <h2>رأسه وشعره أبيضان كالصوف الأبيض، كالثلج</h2>
            <div class="content-wrapper">
                <div class="text-content">
                    <h3>النص الكتابي:</h3>
                    <p>"وَرَأْسُهُ وَشَعْرُهُ أَبْيَضَانِ كَالصُّوفِ الأَبْيَضِ، كَالثَّلْجِ..." (الرؤيا 1: 14)</p>
                    <h3>المعنى:</h3>
                    <p>يدل هذا على **الأزلية، القدم، الحكمة، والنقاوة المطلقة**. اللون الأبيض يرمز إلى الطهارة والنقاء، والشعر الأبيض يرمز إلى الحكمة والخبرة الطويلة التي لا بداية لها ولا نهاية. هذه الصفة تشير إلى **الله الأزلي الأبدي** الذي كان قبل كل الدهور ولا يتغير.</p>
                    <h3>التشبيه:</h3>
                    <p>يشبه **شيخوخة حكيمة وكريمة**، لكنها هنا تشير إلى كمال وجوده الأزلي الذي لا يعرف بداية أو نهاية، وأنه هو **القديم الأيام** الذي يمتلك كل المعرفة والحكمة.</p>
                </div>
                <div class="image-content">
                    <img src="www-st-takla-org--5-26-dublin-st-patrick-cathedral-b-0009.jpg" alt="">
                    <p class="image-caption">رسم يوضح نقاء وحكمة الأزلية.</p>
                </div>
            </div>
        </section>

        <section id="flameEyes" class="feature-section">
            <h2>عَيْنَاهُ كَلَهِيبِ نَارٍ</h2>
            <div class="content-wrapper">
                <div class="text-content">
                    <h3>النص الكتابي:</h3>
                    <p>"...وَعَيْنَاهُ كَلَهِيبِ نَارٍ." (الرؤيا 1: 14)</p>
                    <h3>المعنى:</h3>
                    <p>ترمز إلى **المعرفة الكلية، الاختراق، الدينونة، والقدرة على فحص كل شيء**. لا يوجد شيء مخفي عن عينيه، فهو يرى كل خفي وظاهر. تشير هذه العيون إلى **بصيرة الله التي تميز بين الحق والباطل**، وتكشف النوايا الخفية. ترمز لـ **تفحص كل شيء**.</p>
                    <h3>التشبيه:</h3>
                    <p>مثل **النار التي تكشف وتطهر وتحرق كل ما هو غير نقي**، عينيه تخترقان أعماق القلوب وتكشف الحقائق، كما أنها تعبر عن **غيرة الله المقدسة** ضد الشر والخطيئة.</p>
                </div>
                <div class="image-content">
                    <img src="503606517_10082814055088561_6447194419587411826_n.jpg" alt="">
                    <p class="image-caption">تجسيد للقوة الإلهية التي تخترق كل خفاء.</p>
                </div>
            </div>
        </section>

        <section id="bronzeFeet" class="feature-section">
            <h2>رِجْلاَهُ شِبْهُ النُّحَاسِ النَّقِيِّ، كَأَنَّهُمَا مَحْمِيَّتَانِ فِي أَتُونٍ</h2>
            <div class="content-wrapper">
                <div class="text-content">
                    <h3>النص الكتابي:</h3>
                    <p>"وَرِجْلاَهُ شِبْهُ النُّحَاسِ النَّقِيِّ، كَأَنَّهُمَا مَحْمِيَّتَانِ فِي أَتُونٍ..." (الرؤيا 1: 15)</p>
                    <h3>المعنى:</h3>
                    <p>يدل هذا على **الاستقرار، الثبات، قوة الدينونة، والقدرة على سحق الأعداء**. النحاس النقي المحمى يشير إلى المتانة والقوة التي لا تتزعزع. هذه الصفة تظهر **عدل الله الذي يدوس على الشر** ويقيم مملكة البر. دليل على **المتانة والثبات**.</p>
                    <h3>التشبيه:</h3>
                    <p>يشبه **أساسًا قويًا وثابتًا لا يمكن زعزعته**، ويرمز أيضًا إلى قدرته على الدوس على الشر والدينونة العادلة. كما يشير إلى **نقاوة طرق الله** وعمله الذي لا تشوبه شائبة.</p>
                </div>
                <div class="image-content">
                    <img src="Leonardo_Phoenix_09_Depict_a_heavenly_apocalyptic_scene_inspir_2.jpg" alt="">
                    <p class="image-caption">قوة وثبات لا يتزعزعان.</p>
                </div>
            </div>
        </section>

        <section id="voiceWater" class="feature-section">
            <h2>وَصَوْتُهُ كَصَوْتِ مِيَاهٍ كَثِيرَةٍ</h2>
            <div class="content-wrapper">
                <div class="text-content">
                    <h3>النص الكتابي:</h3>
                    <p>"...وَصَوْتُهُ كَصَوْتِ مِيَاهٍ كَثِيرَةٍ." (الرؤيا 1: 15)</p>
                    <h3>المعنى:</h3>
                    <p>يشير إلى **القوة، السلطة، المهابة، والشمولية**. صوت الله له تأثير عظيم ويصل إلى كل مكان، فهو يغطي كل شيء. هذا التشبيه يعبر عن **كلمة الله الفعالة** التي تحدث وتخلق وتدين، ولا يمكن لأحد أن يقف أمامها. دليل على **القوة والرهبة**.</p>
                    <h3>التشبيه:</h3>
                    <p>مثل **شلالات عظيمة أو أمواج المحيط الهادرة**، صوته قوي ومهيب، لا يمكن تجاهله أو مقاومته. يعبر عن **السيادة المطلقة** لله الذي بكلمته خلق السماوات والأرض.</p>
                </div>
                <div class="image-content">
                    <img src="110015342_3343270162390915_8246108657343253211_n.jpg" alt="">
                    <p class="image-caption">صوت مهيب يملأ الكون.</p>
                </div>
            </div>
        </section>

        <section id="twoEdgedSword" class="feature-section">
            <h2>وَمِنْ فَمِهِ يَخْرُجُ سَيْفٌ مَاضٍ ذُو حَدَّيْنِ</h2>
            <div class="content-wrapper">
                <div class="text-content">
                    <h3>النص الكتابي:</h3>
                    <p>"...وَمِنْ فَمِهِ يَخْرُجُ سَيْفٌ مَاضٍ ذُو حَدَّيْنِ..." (الرؤيا 1: 16)</p>
                    <h3>المعنى:</h3>
                    <p>يرمز إلى **كلمة الله الحية والفعالة، القادرة على الفصل بين الحق والباطل، والحكم والدينونة**. هذه الكلمة تخترق النفوس والأرواح، وتميز الخفي من الظاهر. هي **كلمة القوة والتغيير** التي تنفذ وتدين.</p>
                    <h3>التشبيه:</h3>
                    <p>مثل **السيف الذي يقطع ويخترق كل شيء**، كلمة الله قاطعة وحاسمة، تفصل بين النور والظلمة. إنها **كلمة الله التي تدين** الخطية وتكشف الزيف، وتعلن الحق المطلق.</p>
                </div>
                <div class="image-content">
                    <img src="Flux_Dev_A_highly_detailed_and_realistic_illustration_of_a_sha_.jpg" alt="">
                    <p class="image-caption">قوة كلمة الله الفاصلة.</p>
                </div>
            </div>
        </section>

        <section id="shiningFace" class="feature-section">
            <h2>وَوَجْهُهُ كَالشَّمْسِ وَهِيَ تُضِيءُ فِي قُوَّتِهَا</h2>
            <div class="content-wrapper">
                <div class="text-content">
                    <h3>النص الكتابي:</h3>
                    <p>"...وَوَجْهُهُ كَالشَّمْسِ وَهِيَ تُضِيءُ فِي قُوَّتِهَا." (الرؤيا 1: 16)</p>
                    <h3>المعنى:</h3>
                    <p>يدل على **المجد المطلق، النور الإلهي، البريق، والقداسة**. وجه الله يشع نورًا لا يطاق في مجده وعظمته. هذه الصفة تؤكد **بهاء الله وكماله** الذي لا يمكن إدراكه بالكامل بالعين البشرية. دليل على **الضياء الشديد**.</p>
                    <h3>التشبيه:</h3>
                    <p>يشبه **الشمس في أوج قوتها وسطوعها**، لا يمكن لأحد أن ينظر إليها مباشرة بسبب شدة ضوئها، وهذا يرمز إلى بهاء مجد الله الذي لا يمكن إدراكه بشكل كامل، وإلى **نوره الذي يبدد كل ظلمة**.</p>
                </div>
                <div class="image-content">
                    <img src="Flux_Dev_a_breathtakingly_detailed_ultrahighresolution_illustr_0.jpg" alt="">
                    <p class="image-caption">مجد وبهاء النور الإلهي.</p>
                </div>
            </div>
        </section>

        <section id="appearedChrist" class="feature-section">
            <h2>ظهور السيد المسيح ليوحنا</h2>
            <div class="content-wrapper">
                <div class="text-content">
                    <h3>النص الكتابي:</h3>
                    <p>"فَلَمَّا رَأَيْتُهُ سَقَطْتُ عِنْدَ رِجْلَيْهِ كَمَيْتٍ، فَوَضَعَ يَدَهُ الْيُمْنَى عَلَيَّ قَائِلاً لِي: لاَ تَخَفْ، أَنَا هُوَ الأَوَّلُ وَالآخِرُ، وَالْحَيُّ. وَكُنْتُ مَيْتًا، وَهَا أَنَا حَيٌّ إِلَى أَبَدِ الآبِدِينَ. آمِينَ. وَلِي مَفَاتِيحُ الْهَاوِيَةِ وَالْمَوْتِ." (الرؤيا 1: 17-18)</p>
                    <h3>المعنى:</h3>
                    <p>هذا الظهور يرمز إلى **المهابة والمجد العظيم للسيد المسيح في لاهوته**. رد فعل يوحنا بالسقوط كالميت يدل على عظمة هذا الظهور وعدم قدرة الإنسان على تحمل بهاء المجد الإلهي. تأكيد المسيح أنه "الأول والآخر والحي" وله مفاتيح الهاوية والموت يؤكد على **أزليته، أبدية، قيامته، وسلطانه المطلق على الحياة والموت**.</p>
                    <h3>التشبيه:</h3>
                    <p>يشبه هذا الظهور **الرؤى العظيمة للأنبياء** التي تدل على حضور الله وقوته. إنه يرمز إلى **مجد المسيح بعد القيامة والصعود**، وسلطانه على كل شيء، وأنه هو الرب الحقيقي الذي له كل السيادة والقوة.</p>
                </div>
                <div class="image-content">
                    <img src="Flux_Dev_a_breathtaking_highly_detailed_and_vibrantly_colored__3.jpg" alt="">
                    <p class="image-caption">مشهد مهيب لظهور المسيح ليوحنا، رمزاً للمجد والسلطان.</p>
                </div>
            </div>
        </section>

        <!-- Chapter: Revelation 2 & 3 - The Seven Churches -->
        <div id="revelation2-content" class="chapter-content">
            <div class="navigation">
                <button class="nav-button active" data-target="ephesus">كنيسة أفسس</button>
                <button class="nav-button" data-target="smyrna">كنيسة سميرنا</button>
                <button class="nav-button" data-target="pergamos">كنيسة برغامس</button>
                <button class="nav-button" data-target="thyatira">كنيسة ثياتيرا</button>
                <button class="nav-button" data-target="sardis">كنيسة ساردس</button>
                <button class="nav-button" data-target="philadelphia">كنيسة فيلادلفيا</button>
                <button class="nav-button" data-target="laodicea">كنيسة لاودكية</button>
            </div>
        </div>
        <section id="ephesus" class="feature-section">
            <h2>كنيسة أفسس: فقدان المحبة الأولى</h2>
            <div class="content-wrapper">
                <div class="text-content">
                    <h3>النص الكتابي:</h3>
                    <p>"أَنَا عَارِفٌ أَعْمَالَكَ وَتَعَبَكَ وَصَبْرَكَ، وَأَنَّكَ لاَ تَقْدِرُ أَنْ تَحْتَمِلَ الأَشْرَارَ، وَقَدْ جَرَّبْتَ الْقَائِلِينَ إِنَّهُمْ رُسُلٌ وَلَيْسُوا رُسُلاً فَوَجَدْتَهُمْ كَاذِبِينَ. وَقَدِ احْتَمَلْتَ وَلَكَ صَبْرٌ، وَلَمْ تَتْعَبْ مِنْ أَجْلِ اسْمِي. لكِنْ عِنْدِي عَلَيْكَ أَنَّكَ تَرَكْتَ مَحَبَّتَكَ الأُولَى. فَاذْكُرْ مِنْ أَيْنَ سَقَطْتَ وَتُبْ، وَاعْمَلِ الأَعْمَالَ الأُولَى، وَإِلاَّ فَإِنِّي آتِيكَ عَنْ قَرِيبٍ وَأُزَحْزِحْ مَنَارَتَكَ مِنْ مَكَانِهَا، إِنْ لَمْ تَتُبْ." (الرؤيا 2: 2-5)</p>
                    <h3>المعنى:</h3>
                    <p>كانت كنيسة أفسس تتميز بالأعمال الجيدة والصبر وعدم تحمل الشر، لكنها فقدت **محبتها الأولى** للمسيح وللآخرين. هذا يشير إلى خطر الروتين الديني وفقدان الشغف الروحي.</p>
                    <h3>الدرس:</h3>
                    <p>الأعمال الصالحة مهمة، لكن يجب أن تكون مدفوعة بالمحبة الخالصة للمسيح. يدعو الرب للتوبة والعودة إلى الشغف والحيوية الروحية الأولى.</p>
                </div>
                <div class="image-content">
                    <img src="9-saint-mary_s-basilica-the-double-church-where-the-council-of-ephesusd983d986d98ad8b3d8a9-d8a7d984d8a8d8a7d8b2d98ad984d98ad983-d985d8a7d8b1d98a-d8add98ad8ab.jpg" alt="">
                    <p class="image-caption">صورة لكنيسة أفسس.</p>
                </div>
            </div>
        </section>

        <section id="smyrna" class="feature-section">
            <h2>كنيسة سميرنا: الصبر في الضيق</h2>
            <div class="content-wrapper">
                <div class="text-content">
                    <h3>النص الكتابي:</h3>
                    <p>"أَنَا عَارِفٌ أَعْمَالَكَ وَضِيقَتَكَ وَفَقْرَكَ، وَأَنْتَ غَنِيٌّ! وَتَجْدِيفَ الْقَائِلِينَ إِنَّهُمْ يَهُودٌ وَلَيْسُوا يَهُودًا، بَلْ مَجْمَعُ الشَّيْطَانِ. لاَ تَخَفْ الْبَتَّةَ مِمَّا أَنْتَ مُزْمِعٌ أَنْ تَتَأَلَّمَ بِهِ. هُوَذَا إِبْلِيسُ مُزْمِعٌ أَنْ يُلْقِيَ بَعْضًا مِنْكُمْ فِي السِّجْنِ لِكَيْ تُجَرَّبُوا، وَيَكُونَ لَكُمْ ضِيقَةُ عَشَرَةِ أَيَّامٍ. كُنْ أَمِينًا إِلَى الْمَوْتِ فَسَأُعْطِيكَ إِكْلِيلَ الْحَيَاةِ." (الرؤيا 2: 9-10)</p>
                    <h3>المعنى:</h3>
                    <p>كنيسة سميرنا كانت تعاني من الضيق والفقر والاضطهاد، لكن الرب يصفها بأنها **غنية روحيًا**. يشجعهم على الثبات والأمانة حتى الموت.</p>
                    <h3>الدرس:</h3>
                    <p>الأمانة في وجه الاضطهاد تجلب مكافأة عظيمة، وهي إكليل الحياة. الضيقات قد تكون قصيرة الأمد، لكن الأمانة لله تدوم إلى الأبد.</p>
                </div>
                <div class="image-content">
                    <img src="images.jpg" alt="">
                    <p class="image-caption">صورة لكنيسة سميرنا.</p>
                </div>
            </div>
        </section>

        <section id="pergamos" class="feature-section">
            <h2>كنيسة برغامس: التنازل عن الحق</h2>
            <div class="content-wrapper">
                <div class="text-content">
                    <h3>النص الكتابي:</h3>
                    <p>"أَنَا عَارِفٌ أَيْنَ تَسْكُنُ، حَيْثُ كُرْسِيُّ الشَّيْطَانِ، وَأَنْتَ مُتَمَسِّكٌ بِاسْمِي وَلَمْ تُنْكِرْ إِيمَانِي حَتَّى فِي الأَيَّامِ الَّتِي فِيهَا كَانَ أَنْتِيبَاسُ شَاهِدِي الأَمِينُ الَّذِي قُتِلَ عِنْدَكُمْ حَيْثُ يَسْكُنُ الشَّيْطَانُ. وَلَكِنْ عِنْدِي عَلَيْكَ قَلِيلٌ: أَنَّ عِنْدَكَ هُنَاكَ قَوْمًا مُتَمَسِّكِينَ بِتَعْلِيمِ بَلْعَامَ، الَّذِي كَانَ يُعَلِّمُ بَالاَقَ أَنْ يُلْقِيَ مَعْثَرَةً أَمَامَ بَنِي إِسْرَائِيلَ: أَنْ يَأْكُلُوا مَا ذُبِحَ لِلأَوْثَانِ وَيَزْنُوا." (الرؤيا 2: 13-14)</p>
                    <h3>المعنى:</h3>
                    <p>كنيسة برغامس كانت تعيش في "حيث كرسي الشيطان" (مركز عبادة الأوثان)، وكانت متمسكة بالإيمان. لكن بعض أعضائها سمحوا بتعاليم خاطئة (مثل تعليم بلعام) تتسلل إليهم، مما أدى إلى **الخطايا الأخلاقية وعبادة الأوثان**.</p>
                    <h3>الدرس:</h3>
                    <p>حتى في بيئة صعبة، يجب على المؤمنين التمسك بالحق ورفض أي تسوية مع الشر أو التعاليم الخاطئة. الطاعة لكلمة الله أهم من مجرد الحفاظ على الاسم.</p>
                </div>
                <div class="image-content">
                    <img src="احدى الكنائس السبعه بسفر الرؤيا ( برغامس).jpg" alt="">
                    <p class="image-caption">صورة لكنيسة برغامس.</p>
                </div>
            </div>
        </section>

        <section id="thyatira" class="feature-section">
            <h2>كنيسة ثياتيرا: تسامح مع الشر</h2>
            <div class="content-wrapper">
                <div class="text-content">
                    <h3>النص الكتابي:</h3>
                    <p>"وَلَكِنْ عِنْدِي عَلَيْكَ قَلِيلٌ: أَنَّكَ تُسَامِحُ الْمَرْأَةَ إِيزَابَلَ الَّتِي تَقُولُ إِنَّهَا نَبِيَّةٌ، وَتُعَلِّمُ وَتُغْوِي عَبِيدِي حَتَّى يَزْنُوا وَيَأْكُلُوا مَا ذُبِحَ لِلأَوْثَانِ." (الرؤيا 2: 20)</p>
                    <h3>المعنى:</h3>
                    <p>تميزت كنيسة ثياتيرا بالأعمال الكثيرة والمحبة والخدمة، لكنها تسامحت مع امرأة تدعي النبوة (إيزابل) وكانت تقود المؤمنين إلى **الخطية الأخلاقية وعبادة الأوثان**.</p>
                    <h3>الدرس:</h3>
                    <p>ليس كافيًا أن تكون لديك أعمال صالحة، بل يجب أيضًا أن تكون صارمًا ضد الشر والتعاليم الخاطئة داخل الكنيسة. التساهل مع الخطية يقود إلى الفساد الروحي.</p>
                </div>
                <div class="image-content">
                    <img src="image.jpg" alt="">
                    <p class="image-caption">صورة لكنيسة ثياتيرا.</p>
                </div>
            </div>
        </section>

        <section id="sardis" class="feature-section">
            <h2>كنيسة ساردس: الموت الروحي</h2>
            <div class="content-wrapper">
                <div class="text-content">
                    <h3>النص الكتابي:</h3>
                    <p>"وَاكْتُبْ إِلَى مَلاَكِ كَنِيسَةِ سَارْدِسَ: «هذَا يَقُولُهُ الَّذِي لَهُ سَبْعَةُ أَرْوَاحِ اللهِ وَالسَّبْعَةُ الْكَوَاكِبُ: أَنَا عَارِفٌ أَعْمَالَكَ، أَنَّ لَكَ اسْمًا أَنَّكَ حَيٌّ وَأَنْتَ مَيْتٌ. كُنْ سَاهِرًا، وَشَدِّدْ مَا بَقِيَ وَهُوَ مُزْمِعٌ أَنْ يَمُوتَ، لأَنِّي لَمْ أَجِدْ أَعْمَالَكَ كَامِلَةً أَمَامَ اللهِ. فَاذْكُرْ كَيْفَ أَخَذْتَ وَسَمِعْتَ، وَاحْفَظْ وَتُبْ. فَإِنْ لَمْ تَسْهَرْ، أُقْدِمْ عَلَيْكَ كَلِصٍّ، وَلاَ تَعْلَمُ أَيَّةَ سَاعَةٍ أُقْدِمُ عَلَيْكَ." (الرؤيا 3: 1-3)</p>
                    <h3>المعنى:</h3>
                    <p>كنيسة ساردس كان لها سمعة بأنها حية، لكنها في الحقيقة كانت ميتة روحيًا. كانت أعمالها غير كاملة أمام الله، ودعاها الرب إلى اليقظة والتوبة.</p>
                    <h3>الدرس:</h3>
                    <p>السمعة الخارجية لا تعني شيئًا بدون حيوية روحية داخلية. يجب على المؤمنين أن يكونوا ساهرين ومستعدين، وأن يكملوا أعمالهم بالإيمان والمحبة.</p>
                </div>
                <div class="image-content">
                    <img src="https://placehold.co/400x300/2c3e50/ffffff?text=كنيسة+ساردس" alt="">
                    <p class="image-caption">صورة لكنيسة ساردس.</p>
                </div>
            </div>
        </section>

        <section id="philadelphia" class="feature-section">
            <h2>كنيسة فيلادلفيا: الأمانة في القوة القليلة</h2>
            <div class="content-wrapper">
                <div class="text-content">
                    <h3>النص الكتابي:</h3>
                    <p>"وَاكْتُبْ إِلَى مَلاَكِ كَنِيسَةِ فِيلادَلْفِيَةَ: «هذَا يَقُولُهُ الْقُدُّوسُ الْحَقُّ، الَّذِي لَهُ مِفْتَاحُ دَاوُدَ، الَّذِي يَفْتَحُ وَلاَ أَحَدٌ يُغْلِقُ، وَيُغْلِقُ وَلاَ أَحَدٌ يَفْتَحُ: أَنَا عَارِفٌ أَعْمَالَكَ. هَا أَنَا قَدْ جَعَلْتُ أَمَامَكَ بَابًا مَفْتُوحًا وَلاَ يَسْتَطِيعُ أَحَدٌ أَنْ يُغْلِقَهُ، لأَنَّ لَكَ قُوَّةً يَسِيرَةً، وَقَدْ حَفِظْتَ كَلِمَتِي وَلَمْ تُنْكِرِ اسْمِي." (الرؤيا 3: 7-8)</p>
                    <h3>المعنى:</h3>
                    <p>كنيسة فيلادلفيا كانت تتميز بالأمانة لكلمة الله وعدم إنكار اسمه، على الرغم من قوتها القليلة. وعدها الرب بباب مفتوح للخدمة وحماية من ساعة التجربة.</p>
                    <h3>الدرس:</h3>
                    <p>الأمانة لله، حتى في الظروف الصعبة أو مع موارد قليلة، تكافئ بفرص خدمة عظيمة وحماية إلهية. الرب يقدر الإخلاص أكثر من القدرات البشرية.</p>
                </div>
                <div class="image-content">
                    <img src="https://placehold.co/400x300/2c3e50/ffffff?text=كنيسة+فيلادلفيا" alt="">
                    <p class="image-caption">صورة لكنيسة فيلادلفيا.</p>
                </div>
            </div>
        </section>

        <section id="laodicea" class="feature-section">
            <h2>كنيسة لاودكية: الفتور الروحي</h2>
            <div class="content-wrapper">
                <div class="text-content">
                    <h3>النص الكتابي:</h3>
                    <p>"وَاكْتُبْ إِلَى مَلاَكِ كَنِيسَةِ اللَّاوُدِكِيِّينَ: «هذَا يَقُولُهُ الآمِينُ، الشَّاهِدُ الأَمِينُ الصَّادِقُ، بَدَاءَةُ خَلِيقَةِ اللهِ: أَنَا عَارِفٌ أَعْمَالَكَ، أَنَّكَ لَسْتَ بَارِدًا وَلاَ حَارًّا. لَيْتَكَ كُنْتَ بَارِدًا أَوْ حَارًّا! هكَذَا لأَنَّكَ فَتِرٌ، وَلَسْتَ بَارِدًا وَلاَ حَارًّا، أَنَا مُزْمِعٌ أَنْ أَتَقَيَّأَكَ مِنْ فَمِي." (الرؤيا 3: 14-16)</p>
                    <h3>المعنى:</h3>
                    <p>كنيسة لاودكية كانت فاترة روحيًا، لا هي باردة ولا هي حارة. كانت غنية ماديًا لكنها فقيرة روحيًا، ودعاها الرب إلى التوبة وشراء ذهب مصفى بالنار وثياب بيض وكحل للعيون.</p>
                    <h3>الدرس:</h3>
                    <p>الفتور الروحي أخطر من البرودة الصريحة، لأنه يعطي شعورًا زائفًا بالرضا. يجب على المؤمنين أن يسعوا للحرارة الروحية الحقيقية وأن يعتمدوا على غنى المسيح لا على غناهم المادي.</p>
                </div>
                <div class="image-content">
                    <img src="https://placehold.co/400x300/2c3e50/ffffff?text=كنيسة+لاودكية" alt="">
                    <p class="image-caption">صورة لكنيسة لاودكية.</p>
                </div>
            </div>
        </section>

        <!-- Chapter: Acts of the Apostles -->
        <div id="acts-content" class="chapter-content">
            <div class="navigation">
                <button class="nav-button active" data-target="acts1">أعمال الرسل 1</button>
                <button class="nav-button" data-target="acts2">أعمال الرسل 2</button>
                <button class="nav-button" data-target="acts3">أعمال الرسل 3</button>
                <button class="nav-button" data-target="acts4">أعمال الرسل 4</button>
                <button class="nav-button" data-target="acts5">أعمال الرسل 5</button>
                <button class="nav-button" data-target="acts6">أعمال الرسل 6</button>
                <button class="nav-button" data-target="acts7">أعمال الرسل 7</button>
                <button class="nav-button" data-target="acts8">أعمال الرسل 8</button>
                <button class="nav-button" data-target="acts9">أعمال الرسل 9</button>
                <button class="nav-button" data-target="acts10">أعمال الرسل 10</button>
                <button class="nav-button" data-target="acts11">أعمال الرسل 11</button>
                <button class="nav-button" data-target="acts12">أعمال الرسل 12</button>
                <button class="nav-button" data-target="acts13">أعمال الرسل 13</button>
                <button class="nav-button" data-target="acts14">أعمال الرسل 14</button>
            </div>
        </div>
        <section id="acts1" class="feature-section">
            <h2>أعمال الرسل 1: صعود المسيح واختيار متياس</h2>
            <div class="content-wrapper">
                <div class="text-content">
                    <h3>أهم الأحداث:</h3>
                    <ul>
                        <li>وصية يسوع لتلاميذه بالبقاء في أورشليم حتى يلبسوا قوة من الأعالي.</li>
                        <li>صعود المسيح إلى السماء أمام أعين تلاميذه.</li>
                        <li>ظهور رجلين بثياب بيض ووعدهما بعودة المسيح.</li>
                        <li>اجتماع الرسل مع مريم وبعض النساء للصلاة.</li>
                        <li>اختيار متياس بدلاً من يهوذا الإسخريوطي ليكمل عدد الرسل الاثني عشر.</li>
                    </ul>
                    <h3>التطبيق الروحي:</h3>
                    <p>يعلمنا هذا الإصحاح أهمية الانتظار والصلاة قبل البدء في الخدمة، والثقة في وعود الرب، وأهمية الوحدة في الكنيسة.</p>
                </div>
                <div class="image-content">
                    <img src="www-st-takla-org--sweet-bible-Ac_01_01.jpg" alt="">
                    <p class="image-caption">صعود المسيح واختيار متياس.</p>
                </div>
            </div>
        </section>
        
        <section id="acts2" class="feature-section">
            <h2>أعمال الرسل 2: حلول الروح القدس ويوم الخمسين</h2>
            <div class="content-wrapper">
                <div class="text-content">
                    <h3>أهم الأحداث:</h3>
                    <ul>
                        <li>حلول الروح القدس على التلاميذ في يوم الخمسين وظهور ألسنة كأنها من نار.</li>
                        <li>بدء التلاميذ يتكلمون بألسنة أخرى حسبما أتاهم الروح أن ينطقوا.</li>
                        <li>اندهاش الجموع وسماع كل منهم لغة بلده.</li>
                        <li>خطبة بطرس القوية التي أدت إلى توبة حوالي ثلاثة آلاف نفس.</li>
                        <li>التزام المؤمنين بتعليم الرسل، والشركة، وكسر الخبز، والصلوات.</li>
                    </ul>
                    <h3>التطبيق الروحي:</h3>
                    <p>يبرز هذا الإصحاح قوة الروح القدس في تجديد الحياة والشهادة، وأهمية الكرازة بكلمة الله، ودور الشركة المسيحية في نمو الكنيسة.</p>
                </div>
                <div class="image-content">
                    <img src="download.jpeg" alt="">
                    <p class="image-caption">حلول الروح القدس.</p>
                </div>
            </div>
        </section>

        <section id="acts3" class="feature-section">
            <h2>أعمال الرسل 3: شفاء الأعرج عند باب الجميل</h2>
            <div class="content-wrapper">
                <div class="text-content">
                    <h3>أهم الأحداث:</h3>
                    <ul>
                        <li>بطرس ويوحنا يصعدان إلى الهيكل في ساعة الصلاة.</li>
                        <li>شفاء رجل أعرج من بطن أمه عند باب الهيكل المسمى "الجميل" باسم يسوع المسيح.</li>
                        <li>دهشة الناس واجتماعهم حول بطرس ويوحنا.</li>
                        <li>خطبة بطرس الثانية التي يدعو فيها الشعب إلى التوبة والإيمان بالمسيح.</li>
                    </ul>
                    <h3>التطبيق الروحي:</h3>
                    <p>يظهر قوة اسم يسوع المسيح في الشفاء والخلاص، وأهمية الشهادة الجريئة للمسيح، ودعوة الله المستمرة للتوبة.</p>
                </div>
                <div class="image-content">
                    <img src="www-St-Takla-org--PETEHEAL.jpg" alt="">
                    <p class="image-caption">شفاء الأعرج.</p>
                </div>
            </div>
        </section>

        <section id="acts4" class="feature-section">
            <h2>أعمال الرسل 4: شجاعة بطرس ويوحنا أمام السنهدريم</h2>
            <div class="content-wrapper">
                <div class="text-content">
                    <h3>أهم الأحداث:</h3>
                    <ul>
                        <li>قبض السلطات الدينية على بطرس ويوحنا بسبب كرازتهما بالقيامة.</li>
                        <li>شهادة بطرس الجريئة أمام السنهدريم بأن الخلاص ليس بغير اسم يسوع المسيح.</li>
                        <li>تهديدات السلطات للرسل ومنعهما من التكلم أو التعليم باسم يسوع.</li>
                        <li>صلاة الرسل والمؤمنين بقوة وامتلاء المكان من الروح القدس.</li>
                        <li>المؤمنون يبيعون أملاكهم ويضعون الأثمان عند أقدام الرسل لتوزيعها على المحتاجين.</li>
                    </ul>
                    <h3>التطبيق الروحي:</h3>
                    <p>يعلمنا هذا الإصحاح الشجاعة في الشهادة للمسيح رغم الاضطهاد، وقوة الصلاة الجماعية، وأهمية الشركة والاهتمام بالفقراء في الكنيسة.</p>
                </div>
                <div class="image-content">
                    <img src="www-st-takla-org--sweet-bible-Ac_04_01.jpg" alt="">
                    <p class="image-caption">بطرس ويوحنا أمام السنهدريم.</p>
                </div>
            </div>
        </section>

        <section id="acts5" class="feature-section">
            <h2>أعمال الرسل 5: حنانيا وسفيرة وسجن الرسل</h2>
            <div class="content-wrapper">
                <div class="text-content">
                    <h3>أهم الأحداث:</h3>
                    <ul>
                        <li>قصة حنانيا وسفيرة وموتهما بسبب الكذب على الروح القدس.</li>
                        <li>كثرة الآيات والعجائب التي يجريها الرسل بين الشعب.</li>
                        <li>سجن الرسل بواسطة رئيس الكهنة والحسد، وإخراج ملاك الرب لهم من السجن ليلاً.</li>
                        <li>وقوف الرسل في الهيكل وتعليم الشعب، وتوبيخهم للسنهدريم لرفضهم الحق.</li>
                        <li>قرار السنهدريم بقتل الرسل، وتدخل غمالائيل الذي نصح بتركهم.</li>
                        <li>ضرب الرسل وإطلاق سراحهم، وفرحهم لأنهم استأهلوا أن يهانون من أجل اسم المسيح.</li>
                    </ul>
                    <h3>التطبيق الروحي:</h3>
                    <p>يؤكد هذا الإصحاح على قدسية الروح القدس وخطورة الكذب عليه، وقوة الله في حماية خدامه، والشجاعة في مواجهة الظلم.</p>
                </div>
                <div class="image-content">
                    <img src="www-st-takla-org--sweet-bible-Ac_04_02.jpg" alt="">
                    <p class="image-caption">حنانيا وسفيرة وسجن الرسل.</p>
                </div>
            </div>
        </section>

        <section id="acts6" class="feature-section">
            <h2>أعمال الرسل 6: اختيار الشمامسة واستشهاد استفانوس</h2>
            <div class="content-wrapper">
                <div class="text-content">
                    <h3>أهم الأحداث:</h3>
                    <ul>
                        <li>تذمر اليونانيين على العبرانيين بسبب إهمال أراملهم في الخدمة اليومية.</li>
                        <li>اقتراح الرسل اختيار سبعة رجال مملوئين من الروح القدس وحكمة لخدمة الموائد.</li>
                        <li>اختيار استفانوس وفيليبس وبروخورس ونيكانور وتيمون وبرميناس ونيقولاوس.</li>
                        <li>استفانوس يفعل آيات وعجائب عظيمة ويواجه مقاومة من اليهود.</li>
                        <li>اتهام استفانوس بالتجديف واقتياده إلى السنهدريم.</li>
                    </ul>
                    <h3>التطبيق الروحي:</h3>
                    <p>يظهر أهمية التنظيم في الكنيسة لضمان العدالة في الخدمة، وأهمية اختيار خدام مملوئين من الروح القدس والحكمة، وشجاعة الشهادة للمسيح حتى في مواجهة الموت.</p>
                </div>
                <div class="image-content">
                    <img src="www-St-Takla-org--The-Seven-Deacons.gif" alt="">
                    <p class="image-caption">اختيار الشمامسة.</p>
                </div>
            </div>
        </section>

        <section id="acts7" class="feature-section">
            <h2>أعمال الرسل 7: خطبة استفانوس واستشهاده</h2>
            <div class="content-wrapper">
                <div class="text-content">
                    <h3>النص الكتابي:</h3>
                    <p>"خطبة استفانوس الدفاعية أمام السنهدريم، التي يستعرض فيها تاريخ إسرائيل من إبراهيم حتى المسيح. توبيخ استفانوس لليهود على مقاومتهم الروح القدس وقتلهم الأنبياء والمسيح. رؤية استفانوس للسماء مفتوحة وابن الإنسان قائماً عن يمين الله. رجم استفانوس، وصلاته من أجل الذين يرجمونه "يا رب، لا تقم لهم هذه الخطية". شاول (بولس) يحرس ثياب الذين رجموا استفانوس." (أعمال الرسل 7)</p>
                    <h3>المعنى:</h3>
                    <p>يعلمنا هذا الإصحاح قوة الشهادة الجريئة للحق حتى النهاية، وغفران الأعداء، وأن الألم من أجل المسيح هو طريق للمجد.</p>
                </div>
                <div class="image-content">
                    <img src="www-St-Takla-org--Coptic-Saints-Saint-Stephen-02-01.jpg" alt="">
                    <p class="image-caption">خطبة استفانوس واستشهاده.</p>
                </div>
            </div>
        </section>

        <section id="acts8" class="feature-section">
            <h2>أعمال الرسل 8: الاضطهاد وتبشير فيلبس في السامرة</h2>
            <div class="content-wrapper">
                <div class="text-content">
                    <h3>أهم الأحداث:</h3>
                    <ul>
                        <li>بدء اضطهاد عظيم على الكنيسة في أورشليم وتشتت المؤمنين.</li>
                        <li>شاول يبدأ في اضطهاد الكنيسة بعنف.</li>
                        <li>ذهاب فيلبس إلى السامرة وبشارته بالمسيح، وعمل آيات وعجائب عظيمة.</li>
                        <li>إيمان السامريين وتعمديهم، وقصة سيمون الساحر الذي حاول شراء موهبة الروح القدس.</li>
                        <li>ذهاب بطرس ويوحنا إلى السامرة لوضع الأيدي على المؤمنين لينالوا الروح القدس.</li>
                        <li>فيلبس يبشر الخصي الحبشي ويعمده بعد أن شرح له نبوءة إشعياء.</li>
                    </ul>
                    <h3>التطبيق الروحي:</h3>
                    <p>يظهر أن الاضطهاد يمكن أن يكون وسيلة لانتشار الإنجيل، وأهمية التبشير لكل الأمم، وخطورة محاولة الحصول على البركات الروحية بالمال.</p>
                </div>
                <div class="image-content">
                    <img src="www-st-takla-org--sweet-bible-Ac_08_04.jpg" alt="">
                    <p class="image-caption">تبشير فيلبس في السامرة.</p>
                </div>
            </div>
        </section>

        <section id="acts9" class="feature-section">
            <h2>أعمال الرسل 9: اهتداء شاول وبطرس يقيم طابيثا</h2>
            <div class="content-wrapper">
                <div class="text-content">
                    <h3>أهم الأحداث:</h3>
                    <ul>
                        <li>شاول يذهب إلى دمشق لاضطهاد المسيحيين، وفي الطريق يظهر له المسيح.</li>
                        <li>عمى شاول لمدة ثلاثة أيام، ودعوة حنانيا لشفائه.</li>
                        <li>شفاء شاول وامتلائه بالروح القدس وتعمديه، وبدء بشارته بالمسيح في دمشق.</li>
                        <li>محاولة اليهود قتل شاول وهروبه.</li>
                        <li>بطرس يشفي إينياس في اللد، ويقيم طابيثا (غزالة) من الأموات في يافا.</li>
                    </ul>
                    <h3>التطبيق الروحي:</h3>
                    <p>يبرز هذا الإصحاح قوة الله في تحويل أعظم المضطهدين إلى أعظم المبشرين، وأهمية الطاعة لدعوة الله حتى لو كانت غير متوقعة، وقوة الصلاة في إقامة الأموات.</p>
                </div>
                <div class="image-content">
                    <img src="www-st-takla-org--sweet-bible-Ac_09_01.jpg" alt="">
                    <p class="image-caption">اهتداء شاول.</p>
                </div>
            </div>
        </section>

        <section id="acts10" class="feature-section">
            <h2>أعمال الرسل 10: اهتداء كرنيليوس</h2>
            <div class="content-wrapper">
                <div class="text-content">
                    <h3>أهم الأحداث:</h3>
                    <ul>
                        <li>كرنيليوس، قائد المئة الروماني التقي، يرى رؤيا تأمره بإرسال رجال إلى بطرس.</li>
                        <li>رؤيا بطرس في يافا عن الملاءة التي فيها جميع أنواع الحيوانات النجس والطاهرة، والأمر بأن يأكل.</li>
                        <li>وصول رجال كرنيليوس إلى بطرس.</li>
                        <li>ذهاب بطرس إلى قيصرية ودخوله بيت كرنيليوس والتبشير بالمسيح.</li>
                        <li>حلول الروح القدس على كرنيليوس وأهل بيته وهم يستمعون إلى كلام بطرس.</li>
                        <li>تعميد كرنيليوس وأهل بيته، مما يفتح الباب لدخول الأمم إلى الكنيسة.</li>
                    </ul>
                    <h3>التطبيق الروحي:</h3>
                    <p>يظهر أن الله لا يحابي الوجوه، وأن الإنجيل متاح لكل الأمم، وأهمية الطاعة للرؤى الإلهية حتى لو كانت تخالف المفاهيم التقليدية.</p>
                </div>
                <div class="image-content">
                    <img src="www-St-Takla-org--Peter-Baptizing-the-Centurion-Cornelius-by-Francesco-Trevisani-1709.jpg" alt="">
                    <p class="image-caption">اهتداء كرنيليوس.</p>
                </div>
            </div>
        </section>

        <section id="acts11" class="feature-section">
            <h2>أعمال الرسل 11: دفاع بطرس وانتشار الإنجيل في أنطاكية</h2>
            <div class="content-wrapper">
                <div class="text-content">
                    <h3>أهم الأحداث:</h3>
                    <ul>
                        <li>الرسل والإخوة في اليهودية يسمعون أن الأمم أيضاً قبلوا كلمة الله.</li>
                        <li>بطرس يشرح لهم الرؤيا التي رآها وزيارته لبيت كرنيليوس وحلول الروح القدس عليهم.</li>
                        <li>اقتناعهم وتمجيدهم الله لأن الأمم أيضاً أعطاهم الله توبة للحياة.</li>
                        <li>انتشار الإنجيل إلى أنطاكية وبشارة اليونانيين هناك.</li>
                        <li>إرسال برنابا إلى أنطاكية، وفرحه بما رأى من نعمة الله.</li>
                        <li>برنابا يذهب إلى طرسوس ليطلب شاول، ويحضره إلى أنطاكية، حيث يعلمان الكنيسة لمدة سنة.</li>
                        <li>دعوة التلاميذ لأول مرة "مسيحيين" في أنطاكية.</li>
                    </ul>
                    <h3>التطبيق الروحي:</h3>
                    <p>يؤكد هذا الإصحاح على أن الخلاص ليس مقتصراً على شعب معين، وأهمية قبول الآخر، ودور المعلمين في بناء الكنيسة.</p>
                </div>
                <div class="image-content">
                    <img src="www-st-takla-org--sweet-bible-Ac_12_03.jpg" alt="">
                    <p class="image-caption">انتشار الإنجيل في أنطاكية.</p>
                </div>
            </div>
        </section>

        <section id="acts12" class="feature-section">
            <h2>أعمال الرسل 12: سجن بطرس وموت هيرودس</h2>
            <div class="content-wrapper">
                <div class="text-content">
                    <h3>أهم الأحداث:</h3>
                    <ul>
                        <li>هيرودس الملك يمد يديه ليؤذي أناساً من الكنيسة.</li>
                        <li>قتل يعقوب أخي يوحنا بالسيف.</li>
                        <li>قبض هيرودس على بطرس وسجنه، وعزمه على تقديمه للشعب بعد الفصح.</li>
                        <li>صلاة الكنيسة الحارة من أجل بطرس.</li>
                        <li>ملاك الرب يحرر بطرس من السجن بشكل معجزي.</li>
                        <li>ذهاب بطرس إلى بيت مريم أم يوحنا، حيث كان كثيرون مجتمعين يصلون.</li>
                        <li>موت هيرودس بضربة ملاك الرب بعد أن قبل المجد الإلهي لنفسه.</li>
                    </ul>
                    <h3>التطبيق الروحي:</h3>
                    <p>يظهر قوة الصلاة الجماعية في تحرير السجناء، وحماية الله لخدامه، وعقابه للمتكبرين الذين يغتصبون مجد الله.</p>
                </div>
                <div class="image-content">
                    <img src="www-St-Takla-org--10-Peter-Released-from-Prison-by-an-Angel.jpg" alt="">
                    <p class="image-caption">سجن بطرس وموت هيرودس.</p>
                </div>
            </div>
        </section>

        <section id="acts13" class="feature-section">
            <h2>أعمال الرسل 13: رحلة بولس وبرنابا التبشيرية الأولى</h2>
            <div class="content-wrapper">
                <div class="text-content">
                    <h3>أهم الأحداث:</h3>
                    <ul>
                        <li>فصل الروح القدس لبرنابا وشاول للعمل الذي دعاهما إليه.</li>
                        <li>ذهابهما إلى سلوكية ومنها بالإبحار إلى قبرص.</li>
                        <li>تبشيرهما في سلاميس، وتعمية ساحر اسمه أليماس في بافوس.</li>
                        <li>ذهابهما إلى برجة بمفيلية، ثم إلى أنطاكية بيسيدية.</li>
                        <li>خطبة بولس في المجمع اليهودي في أنطاكية بيسيدية، التي يستعرض فيها تاريخ الخلاص بالمسيح.</li>
                        <li>بعض اليهود يقبلون الإنجيل، والبعض الآخر يقاوم.</li>
                        <li>تحول بولس وبرنابا إلى الأمم بسبب رفض اليهود.</li>
                        <li>اضطهاد بولس وبرنابا وطردهما من المدينة.</li>
                    </ul>
                    <h3>التطبيق الروحي:</h3>
                    <p>يبدأ هذا الإصحاح رحلة التبشير للأمم، ويظهر أهمية قيادة الروح القدس للخدمة، والشجاعة في مواجهة المقاومة.</p>
                </div>
                <div class="image-content">
                    <img src="images.jpeg" alt="">
                    <p class="image-caption">رحلة بولس وبرنابا التبشيرية الأولى.</p>
                </div>
            </div>
        </section>

        <section id="acts14" class="feature-section">
            <h2>أعمال الرسل 14: التبشير في أيقونية ولسترة ودربة</h2>
            <div class="content-wrapper">
                <div class="text-content">
                    <h3>أهم الأحداث:</h3>
                    <ul>
                        <li>تبشير بولس وبرنابا في أيقونية وعمل آيات وعجائب.</li>
                        <li>انقسام المدينة بين مؤمنين وغير مؤمنين، ومحاولة رجمهما.</li>
                        <li>ذهابهما إلى لسترة ودربة.</li>
                        <li>شفاء بولس لرجل أعرج في لسترة، وظن الناس أنهما إلهان (زفس وهرمس).</li>
                        <li>محاولة أهل لسترة أن يذبحوا لهما، ومنع بولس وبرنابا لهم.</li>
                        <li>وصول يهود من أنطاكية وأيقونية وإثارتهم الجموع، ورجمهم لبولس وتركه كالميت.</li>
                        <li>قيام بولس ودخوله المدينة في اليوم التالي وذهابه مع برنابا إلى دربة.</li>
                        <li>عودتهما إلى لسترة وأيقونية وأنطاكية لتقوية النفوس وتعيين شيوخ.</li>
                        <li>عودتهما إلى أنطاكية سوريا حيث ابتدأا.</li>
                    </ul>
                    <h3>التطبيق الروحي:</h3>
                    <p>يظهر أن الخدمة الحقيقية تتطلب الصبر في الضيقات، وعدم قبول المجد البشري، وأهمية متابعة المؤمنين الجدد وتقوية الكنائس.</p>
                </div>
                <div class="image-content">
                    <img src="www-St-Takla-org--232--Paul-&-Barnabas-Treated-as-Gods.jpg" alt="">
                    <p class="image-caption">التبشير في أيقونية ولسترة ودربة.</p>
                </div>
            </div>
        </section>

        <!-- New Section: My Church Information -->
        <div id="my-church-content" class="chapter-content">
            <div class="navigation">
                <button class="nav-button active" data-target="church-history">تاريخ الكنيسة</button>
                <button class="nav-button" data-target="church-beliefs">عقائد الكنيسة</button>
                <button class="nav-button" data-target="church-activities">أنشطة الكنيسة</button>
            </div>
        </div>
        <section id="church-history" class="feature-section">
            <h2>تاريخ كنيستي: كنيسة لاودكية الأثرية</h2>
            <div class="content-wrapper">
                <div class="text-content">
                    <h3>النشأة والتأسيس:</h3>
                    <p>تأسست كنيسة لاودكية الأثرية في مدينة لاودكية القديمة، وهي إحدى الكنائس السبع المذكورة في سفر الرؤيا (الرؤيا 3: 14-22). على الرغم من أنها كانت غنية ماديًا، إلا أنها وُبخت من الرب على فتورها الروحي. تاريخها يمتد إلى العصور الرسولية، حيث كانت مركزًا مسيحيًا مهمًا في آسيا الصغرى.</p>
                    <h3>المراحل الرئيسية:</h3>
                    <ul>
                        <li>**القرن الأول الميلادي:** تأسيس الكنيسة على يد الرسل أو تلاميذهم، وربما على يد أبفراس (كولوسي 4: 12-13).</li>
                        <li>**حوالي 95 م:** توجيه رسالة الرب يسوع المسيح إلى كنيسة لاودكية عبر يوحنا اللاهوتي، والتي انتقدت فتورها الروحي ودعتها للتوبة.</li>
                        <li>**العصور البيزنطية:** استمرت الكنيسة في الوجود والتأثير، وشهدت فترات من الازدهار والتحديات.</li>
                        <li>**العصور اللاحقة:** تعرضت المدينة والكنيسة للعديد من الزلازل والتغيرات السياسية، مما أدى إلى تدهورها تدريجياً.</li>
                    </ul>
                    <h3>التأثير الروحي:</h3>
                    <p>تظل قصة كنيسة لاودكية تحذيرًا روحيًا للمؤمنين عبر العصور، مؤكدة على أهمية الحرارة الروحية، والاعتماد على غنى المسيح الحقيقي بدلاً من الغنى المادي الزائف، والسعي الدائم للتوبة والنمو في الإيمان.</p>
                </div>
                <div class="image-content">
                    <img src="https://placehold.co/400x300/2c3e50/ffffff?text=كنيسة+لاودكية+الأثرية" alt="">
                    <p class="image-caption">آثار كنيسة لاودكية القديمة.</p>
                </div>
            </div>
        </section>

        <section id="church-beliefs" class="feature-section">
            <h2>عقائد الكنيسة: الأرثوذكسية القبطية</h2>
            <div class="content-wrapper">
                <div class="text-content">
                    <h3>الإيمان المسيحي الأرثوذكسي:</h3>
                    <p>تتبع كنيسة لاودكية الأثرية، في سياق دراستنا، الإيمان المسيحي الأرثوذكسي القبطي، وهو إيمان رسولي محافظ على التقليد الكنسي الذي تسلمته من الرسل الأطهار. نؤمن بإله واحد مثلث الأقانيم: الآب والابن والروح القدس، إله واحد في الجوهر، متمايز في الأقانيم.</p>
                    <h3>النقاط العقائدية الأساسية:</h3>
                    <ul>
                        <li>**التجسد والفداء:** نؤمن بتجسد الابن الوحيد، ربنا يسوع المسيح، الذي صار إنسانًا كاملًا وإلهًا كاملًا، وصلب ومات وقام في اليوم الثالث ليخلص البشرية من الخطية والموت.</li>
                        <li>**الأسرار الكنسية:** نمارس الأسرار السبعة المقدسة (المعمودية، الميرون، التناول، التوبة والاعتراف، مسحة المرضى، الزيجة، الكهنوت) كوسائل للنعمة الإلهية.</li>
                        <li>**الكتاب المقدس:** نعتبر الكتاب المقدس (العهد القديم والعهد الجديد) كلمة الله الموحى بها، وهو المصدر الأساسي لعقيدتنا وحياتنا.</li>
                        <li>**التقليد الكنسي:** نتمسك بالتقليد الكنسي المقدس، الذي يشمل كتابات الآباء القديسين، قرارات المجامع المسكونية، والطقوس الليتورجية، كجزء لا يتجزأ من فهمنا للإيمان.</li>
                        <li>**شفاعة القديسين:** نؤمن بشفاعة السيدة العذراء مريم والملائكة والقديسين، ونطلب صلواتهم عنا أمام عرش النعمة.</li>
                    </ul>
                    <h3>الهدف الروحي:</h3>
                    <p>هدفنا هو النمو في معرفة الله ومحبته، والعيش حياة مسيحية أصيلة تعكس قيم الإنجيل، والاستعداد للمجيء الثاني للسيد المسيح.</p>
                </div>
                <div class="image-content">
                    <img src="https://placehold.co/400x300/2c3e50/ffffff?text=عقائد+الكنيسة" alt="">
                    <p class="image-caption">أيقونة أو رمز يمثل العقيدة الأرثوذكسية.</p>
                </div>
            </div>
        </section>

        <section id="church-activities" class="feature-section">
            <h2>أنشطة الكنيسة: خدمة المجتمع والنمو الروحي</h2>
            <div class="content-wrapper">
                <div class="text-content">
                    <h3>القداسات والصلوات:</h3>
                    <p>تقام القداسات الإلهية بانتظام في أيام الآحاد والأعياد، بالإضافة إلى صلوات التسبحة والتماجيد والاجتماعات الروحية اليومية والأسبوعية، لتغذية الروح وتقوية العلاقة مع الله.</p>
                    <h3>خدمات التعليم والتثقيف:</h3>
                    <ul>
                        <li>**مدارس الأحد:** فصول تعليمية للأطفال والشباب لغرس القيم المسيحية وتعليم الكتاب المقدس.</li>
                        <li>**اجتماعات الشباب والخريجين:** منتديات للنقاش الروحي والاجتماعي، وتقديم المشورة والدعم.</li>
                        <li>**دروس الكتاب المقدس:** دراسات معمقة للكتاب المقدس لجميع الأعمار.</li>
                        <li>**الندوات والمحاضرات:** استضافة متحدثين لتقديم موضوعات روحية واجتماعية وثقافية.</li>
                        <li>**برامج التنمية:** ورش عمل ودورات تدريبية لتنمية مهارات الشباب ومساعدتهم في سوق العمل.</li>
                    </ul>
                    <h3>الخدمات الاجتماعية والخيرية:</h3>
                    <ul>
                        <li>**خدمة الفقراء والمحتاجين:** تقديم الدعم المادي والعيني للعائلات المتعففة.</li>
                        <li>**زيارات المرضى وكبار السن:** تقديم الرعاية الروحية والنفسية للمرضى وكبار السن في بيوتهم والمستشفيات.</li>
                        <li>**المساعدات الطبية:** توفير الدعم للمرضى الذين يحتاجون إلى علاج أو عمليات جراحية.</li>
                    </ul>
                    <h3>الأنشطة الترفيهية والروحية:</h3>
                    <ul>
                        <li>**الرحلات والمعسكرات:** تنظيم رحلات ترفيهية وروحية لتعزيز الروابط بين أفراد الكنيسة.</li>
                        <li>**الفرق الكورالية والفنية:** تشجيع المواهب الفنية والموسيقية لتمجيد الله.</li>
                        <li>**الأنشطة الرياضية:** تنظيم فعاليات رياضية لتعزيز الصحة البدنية والروحية.</li>
                    </ul>
                </div>
                <div class="image-content">
                    <img src="https://placehold.co/400x300/2c3e50/ffffff?text=أنشطة+الكنيسة" alt="">
                    <p class="image-caption">صورة لأحد أنشطة الكنيسة المجتمعية.</p>
                </div>
            </div>
        </section>
    </main>

    <footer>
        <p>&copy; 2025 Marc-Tech. All rights reserved.</p>
    </footer>

    <!-- Chatbot FAB -->
    <div class="chat-fab" id="chatFab">
        <i class="fas fa-comment-dots"></i>
        <!-- Notification badge for unread messages -->
        <div class="notification-badge" id="notificationBadge" style="display: none;">!</div>
    </div>

    <!-- Chatbot Modal -->
    <div class="chat-modal" id="chatModal">
        <div class="chat-header">
            <span>مارك - مساعدك الآلي</span>
            <div>
                <button class="clear-chat-button" id="clearChatButton">مسح المحادثة</button>
                <button class="close-button" id="closeChatButton"><i class="fas fa-times"></i></button>
            </div>
        </div>
        <div class="chat-messages" id="chatMessages">
            <!-- Messages will be appended here -->
        </div>
        <!-- Typing indicator for bot responses -->
        <div class="typing-indicator" id="typingIndicator">
            <span></span>
            <span></span>
            <span></span>
        </div>
        <!-- Suggested Questions -->
        <div class="suggested-questions" id="suggestedQuestions">
            <div class="suggested-question" data-question="ما هي صفات الذات الإلهية في سفر الرؤيا؟">ما هي صفات الذات الإلهية في سفر الرؤيا؟</div>
            <div class="suggested-question" data-question="ما هي رسائل السيد المسيح للكنائس السبع؟">ما هي رسائل السيد المسيح للكنائس السبع؟</div>
            <div class="suggested-question" data-question="حدثني عن حياة الآباء الرسل">حدثني عن حياة الآباء الرسل</div>
        </div>
        <div class="chat-input-container">
            <textarea id="chatInput" placeholder="اكتب سؤالك هنا..." dir="rtl"></textarea>
            <button id="sendMessageButton"><i class="fas fa-paper-plane"></i></button>
        </div>
        <!-- Loading indicator (kept for general loading, typing indicator is more specific) -->
        <div class="loading-indicator" id="chatLoadingIndicator">جاري الكتابة...</div>
    </div>

    <!-- Toast Notification (existing) -->
    <div class="toast-notification" id="chatNotification">
        <i class="fas fa-robot"></i>
        <span>مرحباً! اضغط هنا للدردشة مع مارك.</span>
    </div>

    <script>
        document.addEventListener('DOMContentLoaded', () => {
            // DOM Elements
            const welcomeScreen = document.getElementById('welcomeScreen');
            const chapterNavigationContainer = document.getElementById('chapterNavigationContainer');
            const welcomeChapterButtons = welcomeScreen.querySelectorAll('.chapter-nav-button');
            const mainChapterButtons = chapterNavigationContainer.querySelectorAll('.chapter-nav-button');
            const allChapterContents = document.querySelectorAll('.chapter-content');
            const allFeatureSections = document.querySelectorAll('.feature-section'); // Get all feature sections globally
            const searchAreaWrapper = document.getElementById('searchAreaWrapper');
            const searchIcon = document.getElementById('searchIcon');
            const searchBar = document.getElementById('searchBar');
            const searchInput = document.getElementById('searchInput');
            const searchCloseButton = document.getElementById('searchCloseButton');
            const noResultsMessage = document.getElementById('noResultsMessage');
            const main = document.querySelector('main'); // Defined main here

            // Chatbot DOM Elements
            const chatFab = document.getElementById('chatFab');
            const chatModal = document.getElementById('chatModal');
            const closeChatButton = document.getElementById('closeChatButton');
            const clearChatButton = document.getElementById('clearChatButton'); // New clear chat button
            const chatMessages = document.getElementById('chatMessages');
            const chatInput = document.getElementById('chatInput');
            const sendMessageButton = document.getElementById('sendMessageButton');
            const chatLoadingIndicator = document.getElementById('chatLoadingIndicator');
            const chatNotification = document.getElementById('chatNotification');
            const typingIndicator = document.getElementById('typingIndicator'); // New typing indicator
            const notificationBadge = document.getElementById('notificationBadge'); // New notification badge
            const suggestedQuestions = document.getElementById('suggestedQuestions'); // New suggested questions container
            const suggestedQuestionElements = document.querySelectorAll('.suggested-question'); // New suggested question elements

            // Chatbot state
            let chatHistory = [];
            let isFirstInteraction = true; // To show welcome message and suggested questions only once
            let isBotTyping = false; // To prevent sending multiple messages while bot is typing
            let unreadMessages = 0; // For the notification badge
            const botName = "مارك";
            const welcomeMessage = "مرحباً بك! أنا مارك، مساعدك الآلي لدراسة الكتاب المقدس. يمكنني مساعدتك في فهم صفات الذات الإلهية في سفر الرؤيا، رسائل الكنائس السبع، حياة الآباء الرسل، وغيرها من المواضيع الروحية. كيف يمكنني مساعدتك اليوم؟";

            // System instructions for the bot
            const systemInstructions = `
            أنت مساعد آلي ذكي اسمك "مارك" متخصص في دراسة الكتاب المقدس والعقيدة المسيحية الأرثوذكسية.
            مهمتك هي مساعدة المستخدمين في فهم الكتاب المقدس والعقائد المسيحية بطريقة بسيطة وواضحة.
            
            يجب عليك:
            1. الرد بلغة عربية فصحى واضحة وسهلة الفهم.
            2. تقديم إجابات دقيقة ومبنية على الكتاب المقدس والتعاليم الأرثوذكسية.
            3. تقسيم الإجابات الطويلة إلى فقرات واضحة.
            4. استخدام أمثلة وتشبيهات مناسبة عندما يكون ذلك مفيداً.
            5. الابتعاد عن الآراء الشخصية والالتزام بالتعاليم الكنسية.
            6. عند السؤال عن مواضيع خارج نطاق الدين، politely decline والإشارة إلى تخصصك في الأمور الدينية.
            7. استخدام نبرة ودودة واحترافية في نفس الوقت.
            
            مجالات تخصصك:
            - تفسير الكتاب المقدس
            - العقائد المسيحية الأرثوذكسية
            - حياة القديسين والآباء الرسل
            - الطقوس الكنسية والأسرار المقدسة
            - الأخلاقيات المسيحية
            - تاريخ الكنيسة
            `;

            // Initialize chat with system instructions
            // This message is for the AI model's context and not displayed to the user
            chatHistory.push({
                role: "user",
                parts: [{ text: systemInstructions }]
            });

            // Store original content of sections to restore later for search functionality
            const originalSectionContents = {};
            allFeatureSections.forEach(section => { // Store for all feature sections, not just within chapters
                originalSectionContents[section.id] = section.innerHTML;
            });

            /**
             * Highlights occurrences of a query string within a given text.
             * @param {string} text - The original text.
             * @param {string} query - The search query.
             * @returns {string} - The text with query occurrences highlighted.
             */
            const highlightText = (text, query) => {
                if (!query) return text;
                const regex = new RegExp(`(${query})`, 'gi');
                return text.replace(regex, '<span class="highlight">$&</span>');
            };

            /**
             * Removes all highlight spans from the content.
             */
            const removeHighlights = () => {
                allFeatureSections.forEach(section => { // Remove highlights from all feature sections
                    if (originalSectionContents[section.id]) {
                        section.innerHTML = originalSectionContents[section.id];
                    }
                });
            };

            /**
             * Shows a specific chapter's navigation and its first section, hiding others.
             * @param {string} chapterId - The ID of the chapter's navigation to show.
             */
            const showChapterContent = (chapterId) => {
                // Hide all feature sections (pages) when a new chapter is selected
                allFeatureSections.forEach(section => {
                    section.classList.remove('active-page');
                });

                // Hide all chapter navigation containers first
                allChapterContents.forEach(chapter => {
                    chapter.classList.remove('active');
                });

                // Show the selected chapter's navigation
                const selectedChapterNav = document.getElementById(chapterId);
                if (selectedChapterNav) {
                    selectedChapterNav.classList.add('active');
                }

                // Activate the corresponding chapter button in the main navigation
                mainChapterButtons.forEach(button => {
                    if (button.dataset.chapter === chapterId) {
                        button.classList.add('active');
                    } else {
                        button.classList.remove('active');
                    }
                });

                // Make all navigation buttons within the selected chapter large
                if (selectedChapterNav) {
                    selectedChapterNav.querySelectorAll('.nav-button').forEach(button => {
                        button.classList.add('nav-button-large');
                    });
                }
            };

            /**
             * Shows a specific section (as a page) and hides all others.
             * Also activates the corresponding navigation button and shrinks others.
             * @param {string} targetId - The ID of the section to show.
             * @param {string} parentChapterId - The ID of the parent chapter (for button activation).
             */
            const showSection = (targetId, parentChapterId) => {
                // Hide all feature sections (pages) first
                allFeatureSections.forEach(section => {
                    section.classList.remove('active-page');
                });

                // Show the target section
                const targetSection = document.getElementById(targetId);
                if (targetSection) {
                    targetSection.classList.add('active-page');
                    // Scroll to the top of the main content area after section is shown
                    main.scrollIntoView({ behavior: 'smooth', block: 'start' });
                }

                // Manage active state and size for navigation buttons within the parent chapter
                const currentChapterNav = document.getElementById(parentChapterId);
                if (currentChapterNav) {
                    const navButtons = currentChapterNav.querySelectorAll('.nav-button');
                    navButtons.forEach(button => {
                        if (button.dataset.target === targetId) {
                            button.classList.add('active');
                        } else {
                            button.classList.remove('active');
                        }
                        // Remove the large class from ALL sub-buttons when a specific section is selected
                        button.classList.remove('nav-button-large');
                    });
                }
            };

            // Debounce variable for search input
            let searchTimeout;

            /**
             * Applies a search filter to the content.
             * Highlights matching text and shows only the first matching section.
             */
            const applySearchFilter = () => {
                clearTimeout(searchTimeout);
                searchTimeout = setTimeout(() => {
                    const query = searchInput.value.trim();
                    const lowerCaseQuery = query.toLowerCase();
                    
                    removeHighlights(); // Remove previous highlights

                    let foundMatch = false;
                    let firstMatchingSectionId = null;
                    let firstMatchingChapterId = null;

                    // Iterate through all feature sections to find matches
                    allFeatureSections.forEach(section => {
                        // Restore original content for the current section before re-applying highlights
                        section.innerHTML = originalSectionContents[section.id];
                        
                        let sectionHasMatch = false;
                        if (query !== '') {
                            const elementsToSearch = section.querySelectorAll('h2, h3, p');
                            elementsToSearch.forEach(element => {
                                const originalElementText = element.textContent;
                                if (originalElementText.toLowerCase().includes(lowerCaseQuery)) {
                                    element.innerHTML = highlightText(originalElementText, query);
                                    sectionHasMatch = true;
                                }
                            });
                        }

                        if (sectionHasMatch && !foundMatch) {
                            firstMatchingSectionId = section.id;
                            // Determine the parent chapter ID for this section
                            // This relies on section IDs having a chapter prefix (e.g., revelation1-sonOfMan)
                            const parts = section.id.split('-');
                            if (parts.length > 1) { // Ensure there's a prefix to form a chapter ID
                                firstMatchingChapterId = parts[0] + '-content';
                            } else {
                                // Fallback if section ID doesn't follow expected pattern, e.g., acts-content -> acts1
                                // This might need more robust mapping if IDs are inconsistent
                                firstMatchingChapterId = section.id.replace(/\d+$/, '') + 'content'; 
                            }
                            foundMatch = true;
                        }
                    });

                    if (foundMatch && query !== '') {
                        noResultsMessage.style.display = 'none';
                        // Show the chapter navigation for the found section's chapter
                        showChapterContent(firstMatchingChapterId);
                        // Then show the specific matching section
                        showSection(firstMatchingSectionId, firstMatchingChapterId);
                        
                        // Hide all section navigation buttons during active search
                        const activeChapterNav = document.getElementById(firstMatchingChapterId);
                        if (activeChapterNav) {
                            activeChapterNav.querySelectorAll('.nav-button').forEach(btn => btn.style.display = 'none');
                        }
                    } else if (query === '') {
                        noResultsMessage.style.display = 'none';
                        // If search is cleared, revert to initial state (welcome or last chapter/section)
                        // This logic will be handled by initializePage or handleChapterSelection
                        const activeChapterContent = document.querySelector('.chapter-content.active');
                        if (activeChapterContent) {
                            // When search is cleared, hide all sections
                            allFeatureSections.forEach(section => section.classList.remove('active-page'));
                            // Show all nav buttons for the active chapter
                            activeChapterContent.querySelectorAll('.nav-button').forEach(btn => btn.style.display = 'inline-block');
                            // Make them large again
                            activeChapterContent.querySelectorAll('.nav-button').forEach(button => {
                                button.classList.add('nav-button-large');
                            });
                        } else {
                             // If no active chapter, show welcome screen
                            welcomeScreen.style.display = 'flex';
                            chapterNavigationContainer.style.display = 'none';
                            searchAreaWrapper.style.display = 'none';
                            allChapterContents.forEach(chapter => chapter.classList.remove('active'));
                            allFeatureSections.forEach(section => section.classList.remove('active-page'));
                        }
                    } else {
                        // No results found for the query
                        noResultsMessage.style.display = 'block';
                        allFeatureSections.forEach(section => section.classList.remove('active-page')); // Hide all sections
                        allChapterContents.forEach(chapter => chapter.classList.remove('active')); // Hide all chapter navs
                        chapterNavigationContainer.style.display = 'none'; // Hide main chapter nav
                        welcomeScreen.style.display = 'none'; // Ensure welcome is hidden
                    }
                }, 300); // Debounce time: 300ms
            };

            /**
             * Handles the selection of a main chapter button (from welcome screen or main navigation).
             * Hides welcome screen, shows main navigation, and displays the selected chapter's content.
             * @param {string} chapterId - The ID of the chapter to navigate to.
             */
            const handleChapterSelection = (chapterId) => {
                welcomeScreen.style.display = 'none';
                chapterNavigationContainer.style.display = 'flex';
                searchAreaWrapper.style.display = 'flex';
                showChapterContent(chapterId); // This will show the chapter's navigation and make its sub-buttons large
                
                // Clear search input and remove highlights
                searchInput.value = '';
                removeHighlights();
                noResultsMessage.style.display = 'none'; // Hide no results message
                
                // Ensure no section is active when a chapter is first selected
                allFeatureSections.forEach(section => section.classList.remove('active-page'));
            };

            // Event Listeners for Chapter Navigation
            welcomeChapterButtons.forEach(button => {
                button.addEventListener('click', () => {
                    handleChapterSelection(button.dataset.chapter);
                });
            });

            mainChapterButtons.forEach(button => {
                button.addEventListener('click', () => {
                    handleChapterSelection(button.dataset.chapter);
                });
            });

            // Event Listeners for Section Navigation within chapters
            allChapterContents.forEach(chapter => {
                const navButtons = chapter.querySelectorAll('.nav-button');
                navButtons.forEach(button => {
                    button.addEventListener('click', () => {
                        // Ensure search bar is hidden and input is cleared when using regular navigation
                        searchBar.classList.remove('active');
                        searchIcon.style.display = 'block';
                        searchInput.value = '';
                        removeHighlights();
                        noResultsMessage.style.display = 'none'; // Hide no results message
                        
                        showSection(button.dataset.target, chapter.id);
                    });
                });
            });

            // Event Listeners for Search Functionality
            searchIcon.addEventListener('click', () => {
                searchBar.classList.toggle('active');
                if (searchBar.classList.contains('active')) {
                    searchInput.focus();
                    searchIcon.style.display = 'none';
                    // Hide all section navigation buttons when search is active
                    const activeChapterNav = document.querySelector('.chapter-content.active');
                    if (activeChapterNav) {
                        activeChapterNav.querySelectorAll('.nav-button').forEach(btn => btn.style.display = 'none');
                    }
                } else {
                    searchInput.value = '';
                    removeHighlights();
                    applySearchFilter(); // Reset search and show default view
                    searchIcon.style.display = 'block';
                }
            });

            searchCloseButton.addEventListener('click', () => {
                searchBar.classList.remove('active');
                searchInput.value = '';
                removeHighlights();
                applySearchFilter(); // Reset search and show default view
                searchIcon.style.display = 'block';
            });

            searchInput.addEventListener('keyup', applySearchFilter);

            // Add timestamp to messages
            const getCurrentTime = () => {
                const now = new Date();
                return now.toLocaleTimeString('ar-EG', { hour: '2-digit', minute: '2-digit' });
            };

            // Add message to chat
            const addMessage = (sender, text) => {
                const messageElement = document.createElement('div');
                messageElement.classList.add('message-bubble');
                
                if (sender === 'user') {
                    messageElement.classList.add('user-message');
                } else {
                    messageElement.classList.add('bot-message');
                }
                
                messageElement.innerHTML = text; // Use innerHTML to allow for time element
                
                const timeElement = document.createElement('div');
                timeElement.classList.add('message-time');
                timeElement.textContent = getCurrentTime();
                messageElement.appendChild(timeElement);
                
                chatMessages.appendChild(messageElement);
                
                // Scroll to the bottom
                chatMessages.scrollTop = chatMessages.scrollHeight;
                
                // Mark as read if chat is open
                if (chatModal.classList.contains('active')) {
                    unreadMessages = 0;
                    notificationBadge.style.display = 'none';
                    chatFab.classList.remove('active'); // Remove pulse when chat is open
                } else if (sender === 'bot') {
                    unreadMessages++;
                    notificationBadge.textContent = unreadMessages > 9 ? '9+' : unreadMessages;
                    notificationBadge.style.display = 'flex';
                    chatFab.classList.add('active'); // Add pulse for unread messages
                }
            };

            // Show typing indicator
            const showTypingIndicator = () => {
                isBotTyping = true;
                typingIndicator.classList.add('active');
                chatMessages.scrollTop = chatMessages.scrollHeight; // Scroll to bottom to show indicator
            };

            // Hide typing indicator
            const hideTypingIndicator = () => {
                isBotTyping = false;
                typingIndicator.classList.remove('active');
            };

            // Simulate typing delay for more natural interaction
            const simulateTypingDelay = (message) => {
                return new Promise(resolve => {
                    const words = message.split(' ');
                    let typedSoFar = '';
                    let index = 0;
                    
                    // Create a temporary bot message element to show typing
                    const tempMessageElement = document.createElement('div');
                    tempMessageElement.classList.add('message-bubble', 'bot-message');
                    chatMessages.appendChild(tempMessageElement);

                    showTypingIndicator();
                    
                    const typingInterval = setInterval(() => {
                        if (index < words.length) {
                            typedSoFar += (index > 0 ? ' ' : '') + words[index];
                            tempMessageElement.innerHTML = typedSoFar + '<div class="message-time">' + getCurrentTime() + '</div>';
                            chatMessages.scrollTop = chatMessages.scrollHeight; // Keep scrolling as text appears
                            index++;
                        } else {
                            clearInterval(typingInterval);
                            hideTypingIndicator();
                            // Replace the temporary message with the final one using addMessage to ensure proper styling and history update
                            chatMessages.removeChild(tempMessageElement); // Remove temporary element
                            addMessage('bot', message); // Add the complete message
                            resolve();
                        }
                    }, 100); // Adjust typing speed here (100ms per word)
                });
            };

            const clearChat = () => {
                chatMessages.innerHTML = ''; // Clear all messages
                chatHistory = []; // Reset chat history
                // Re-add system instructions for the AI model
                chatHistory.push({ role: "user", parts: [{ text: systemInstructions }] });
                addMessage('bot', welcomeMessage); // Add welcome message again
                chatHistory.push({ role: "model", parts: [{ text: welcomeMessage }] }); // Add welcome message to history
                isFirstInteraction = false; // It's not the first interaction with the welcome message anymore
                suggestedQuestions.style.display = 'flex'; // Show suggested questions again after clearing
            };

            // Send message to Gemini API
            const sendBotMessage = async (userMessage) => {
                chatLoadingIndicator.style.display = 'block'; // Show general loading indicator
                sendMessageButton.disabled = true;
                chatInput.disabled = true;
                
                let botResponse = 'عذراً، لم أتمكن من فهم سؤالك. يرجى المحاولة مرة أخرى لاحقاً.';
                let foundContent = false;
                let relevantSectionContent = '';
                let relevantSectionId = null;
                let relevantChapterId = null;

                const lowerCaseUserMessage = userMessage.toLowerCase();

                // Search for relevant content on the page
                for (const section of allFeatureSections) {
                    const sectionText = section.textContent.toLowerCase();
                    if (sectionText.includes(lowerCaseUserMessage)) {
                        relevantSectionContent = section.textContent;
                        relevantSectionId = section.id;
                        const parts = section.id.split('-');
                        if (parts.length > 1) {
                            relevantChapterId = parts[0] + '-content';
                        }
                        foundContent = true;
                        break; // Found the first relevant section, stop searching
                    }
                }

                // Prepare the full chat history for the API call
                let currentChatContents = [...chatHistory]; // Clone to avoid modifying original history prematurely

                // Add the current user's message to the temporary history
                // This message will be modified below to include context if found
                currentChatContents.push({ role: "user", parts: [{ text: userMessage }] });

                // If relevant content is found, modify the last user message in the cloned history
                if (foundContent) {
                    const lastUserMessage = currentChatContents[currentChatContents.length - 1];
                    lastUserMessage.parts[0].text = `السؤال: "${userMessage}"\n\nمعلومات من الموقع قد تكون ذات صلة:\n---\n${relevantSectionContent}\n---\n\nالرجاء الإجابة على السؤال بناءً على هذه المعلومات أولاً. إذا لم تكن الإجابة موجودة في المعلومات المقدمة، فاستخدم معرفتك العامة للإجابة، ولكن اذكر أن الإجابة من خارج محتوى الموقع.`;
                } else {
                    // If no content found, explicitly tell the model to use general knowledge
                    const lastUserMessage = currentChatContents[currentChatContents.length - 1];
                    lastUserMessage.parts[0].text = `السؤال: "${userMessage}"\n\nلم يتم العثور على معلومات ذات صلة في الموقع. الرجاء الإجابة من معرفتك العامة.`;
                }

                try {
                    const apiKey = ""; // Canvas will provide this
                    const apiUrl = `https://generativelanguage.googleapis.com/v1beta/models/gemini-2.0-flash:generateContent?key=${apiKey}`;
                    
                    const response = await fetch(apiUrl, {
                        method: 'POST',
                        headers: { 'Content-Type': 'application/json' },
                        body: JSON.stringify({ contents: currentChatContents }) // Send the prepared history
                    });

                    const result = await response.json();

                    if (result.candidates && result.candidates.length > 0 &&
                        result.candidates[0].content && result.candidates[0].content.parts &&
                        result.candidates[0].content.parts.length > 0) {
                        botResponse = result.candidates[0].content.parts[0].text;
                        
                        // Simulate typing effect
                        await simulateTypingDelay(botResponse);

                        if (foundContent && relevantChapterId && relevantSectionId) {
                            // Perform navigation after typing simulation
                            handleChapterSelection(relevantChapterId);
                            setTimeout(() => {
                                showSection(relevantSectionId, relevantChapterId);
                                window.location.hash = relevantSectionId; // Update URL hash for direct linking
                            }, 500); // Give a slight delay for smooth transition
                        }
                    } else {
                        console.error('Gemini API response structure unexpected:', result);
                        // Add error message directly if API response is malformed
                        addMessage('bot', 'عذراً، واجهت مشكلة في توليد الإجابة. يرجى المحاولة مرة أخرى.');
                    }
                } catch (error) {
                    // Add error message directly if there's a network or API error
                    addMessage('bot', 'حدث خطأ أثناء الاتصال بخدمة الذكاء الاصطناعي. يرجى المحاولة لاحقاً.');
                    console.error('Error calling Gemini API:', error);
                } finally {
                    // Add the bot's response to the actual chat history.
                    // Note: The user's message in chatHistory was already added at the start of sendBotMessage.
                    // We only add the bot's response here if it wasn't already added by simulateTypingDelay.
                    // The simulateTypingDelay now adds the final message to the DOM and history.
                    chatLoadingIndicator.style.display = 'none'; // Hide general loading indicator
                    sendMessageButton.disabled = false;
                    chatInput.disabled = false;
                    chatInput.focus();
                }
            };

            // Handle sending message
            const handleSendMessage = () => {
                const message = chatInput.value.trim();
                if (message && !isBotTyping) { // Prevent sending if bot is typing
                    addMessage('user', message);
                    sendBotMessage(message);
                    chatInput.value = '';
                    
                    if (isFirstInteraction) {
                        isFirstInteraction = false;
                        // Hide suggested questions after first interaction
                        suggestedQuestions.style.display = 'none';
                    }
                }
            };

            // Handle suggested question click
            suggestedQuestionElements.forEach(question => {
                question.addEventListener('click', () => {
                    const questionText = question.getAttribute('data-question');
                    chatInput.value = questionText;
                    chatInput.focus();
                });
            });

            // Chatbot Event Listeners
            chatFab.addEventListener('click', () => {
                chatModal.classList.toggle('active');
                if (chatModal.classList.contains('active')) {
                    // Reset notification badge when chat is opened
                    unreadMessages = 0;
                    notificationBadge.style.display = 'none';
                    chatFab.classList.remove('active'); // Remove pulse when chat is opened
                    
                    // Send welcome message only if it's the first time opening chat or if chat was cleared
                    // Check if chatHistory contains only the system instruction
                    if (chatHistory.length === 1 && chatHistory[0].parts[0].text === systemInstructions) {
                        addMessage('bot', welcomeMessage);
                        chatHistory.push({ role: "model", parts: [{ text: welcomeMessage }] });
                        isFirstInteraction = false; // Mark as not first interaction after showing welcome
                    }
                    
                    chatInput.focus();
                    chatNotification.classList.remove('show'); // Hide notification when chat is opened
                }
            });

            closeChatButton.addEventListener('click', () => {
                chatModal.classList.remove('active');
            });

            clearChatButton.addEventListener('click', clearChat); // Event listener for clear chat button

            sendMessageButton.addEventListener('click', handleSendMessage);

            chatInput.addEventListener('keypress', (event) => {
                if (event.key === 'Enter' && !event.shiftKey) {
                    event.preventDefault(); // Prevent new line
                    handleSendMessage();
                }
            });

            // Allow Shift+Enter for new lines
            chatInput.addEventListener('keydown', (event) => {
                if (event.key === 'Enter' && event.shiftKey) {
                    event.preventDefault();
                    const start = chatInput.selectionStart;
                    const end = chatInput.selectionEnd;
                    chatInput.value = chatInput.value.substring(0, start) + '\n' + chatInput.value.substring(end);
                    chatInput.selectionStart = chatInput.selectionEnd = start + 1;
                }
            });

            // Auto-resize textarea as user types
            chatInput.addEventListener('input', function() {
                this.style.height = 'auto';
                this.style.height = (this.scrollHeight) + 'px';
            });

            // Close chat when clicking outside
            document.addEventListener('click', (event) => {
                // Check if the click is outside the modal and outside the FAB
                if (!chatModal.contains(event.target) && !chatFab.contains(event.target)) {
                    chatModal.classList.remove('active');
                }
            });

            // Notification display logic
            const showNotification = () => {
                // Only show notification if chat modal is not active
                if (!chatModal.classList.contains('active')) {
                    chatNotification.classList.add('show');
                    setTimeout(() => {
                        chatNotification.classList.remove('show');
                    }, 5000); // Hide after 5 seconds
                }
            };

            // Initial Page Load Logic (handles URL hash)
            const initializePage = () => {
                // Store original content on initial load
                allFeatureSections.forEach(section => {
                    originalSectionContents[section.id] = section.innerHTML;
                });

                const initialHash = window.location.hash.substring(1); // Remove the '#'
                let chapterIdFromHash = null;
                let sectionIdFromHash = null;

                if (initialHash) {
                    // Check if it's a chapter hash (e.g., #revelation1-content)
                    if (document.getElementById(initialHash) && document.getElementById(initialHash).classList.contains('chapter-content')) {
                        chapterIdFromHash = initialHash;
                        // Do NOT set sectionIdFromHash here. User needs to click a sub-button.
                    }
                    // Check if it's a section hash (e.g., #revelation1-sonOfMan)
                    else if (document.getElementById(initialHash) && document.getElementById(initialHash).classList.contains('feature-section')) {
                        sectionIdFromHash = initialHash;
                        const parts = initialHash.split('-');
                        if (parts.length > 1) {
                            chapterIdFromHash = parts[0] + '-content';
                        }
                    }

                    if (chapterIdFromHash) { // If a chapter is identified (either directly or via a section)
                        welcomeScreen.style.display = 'none';
                        chapterNavigationContainer.style.display = 'flex';
                        searchAreaWrapper.style.display = 'flex';
                        showChapterContent(chapterIdFromHash); // Show chapter nav and make its buttons large

                        if (sectionIdFromHash) { // If a specific section was also in the hash
                            // Allow time for chapter nav to display before showing specific section
                            setTimeout(() => showSection(sectionIdFromHash, chapterIdFromHash), 100);
                        } else {
                            // If only chapter was in hash, ensure no section is active
                            allFeatureSections.forEach(section => section.classList.remove('active-page'));
                        }
                    } else {
                        // If hash is invalid or doesn't match a chapter/section, show welcome screen
                        welcomeScreen.style.display = 'flex';
                        chapterNavigationContainer.style.display = 'none';
                        searchAreaWrapper.style.display = 'none';
                        allChapterContents.forEach(chapter => chapter.classList.remove('active'));
                        allFeatureSections.forEach(section => section.classList.remove('active-page'));
                    }
                } else {
                    // If no hash, just show the welcome screen
                    welcomeScreen.style.display = 'flex';
                    chapterNavigationContainer.style.display = 'none';
                    searchAreaWrapper.style.display = 'none';
                    allChapterContents.forEach(chapter => chapter.classList.remove('active'));
                    allFeatureSections.forEach(section => section.classList.remove('active-page'));
                }
                removeHighlights(); // Ensure no leftover highlights on first load
                showNotification(); // Show notification on page load
            };

            initializePage(); // Call the initialization function
        });
    </script>
</body>
</html>
